{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 296447555bb580c15f53","webpack:///./src/index.js","webpack:///./src/lib/live2d.js","webpack:///./src/lib/LAppModel.js","webpack:///./src/lib/Live2DFramework.js","webpack:///./src/lib/netUtils.js","webpack:///./src/lib/MatrixStack.js","webpack:///./src/lib/glMatrix-mat4.js","webpack:///./src/lib/glMatrix-common.js","webpack:///./src/lib/ModelSettingJson.js","webpack:///external \"pixi.js\""],"names":["PIXI","require","Live2DSprite","modelDefine","options","interactive","platform","window","navigator","toLowerCase","fullOptions","Object","assign","priorityForce","priorityDefault","debugLog","debugMouseLog","eyeBlink","lipSyncWithSound","randomMotion","defaultMotionGroup","audioPlayer","modelBasePath","init","model","gl","canvas","dragMgr","viewMatrix","projMatrix","deviceToScreen","texture","modelReady","onModelReady","width","height","RenderTexture","create","canvasWidth","canvasHeight","ratio","left","right","bottom","top","setMaxScreenRect","setScreenRect","multScale","multTranslate","setGL","x","y","anchor","scale","clearColor","load","reset","loadIdentity","update","setDrag","getX","getY","multMatrix","getArray","push","draw","pop","renderer","view","activeTexture","TEXTURE0","length","func","shift","visible","useVAO","createVao","bindVao","_activeVao","flush","arrayBuffer","getParameter","ARRAY_BUFFER_BINDING","elementArrayBuffer","ELEMENT_ARRAY_BUFFER_BINDING","currentProgram","CURRENT_PROGRAM","ACTIVE_TEXTURE","texture0","TEXTURE_BINDING_2D","TEXTURE1","texture1","frontFace","FRONT_FACE","colorWhiteMask","COLOR_WRITEMASK","vertexAttr0Enabled","vertexAttr1Enabled","vertexAttr2Enabled","vertexAttr3Enabled","getVertexAttrib","VERTEX_ATTRIB_ARRAY_ENABLED","scissorTestEnabled","isEnabled","SCISSOR_TEST","stencilTestEnabled","STENCIL_TEST","depthTestEnabled","DEPTH_TEST","cullFaceEnabled","CULL_FACE","blendEnabled","BLEND","_activeTextureLocation","_activeTexture","_activeRenderTarget","vao","bindRenderTexture","clear","COLOR_BUFFER_BIT","CW","bindTexture","TEXTURE_2D","useProgram","bindRenderTarget","bindBuffer","ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","colorMask","enableVertexAttribArray","disableVertexAttribArray","enable","disable","unbind","destroy","release","args","point","hitTest","cx","cy","adjustScale","shiftX","shiftY","adjustTranslate","value","setLipSync","setLipSyncValue","setRandomExpression","name","priority","startRandomMotion","startRandomMotionOnce","stopRandomMotion","no","startMotion","filename","host","playSound","id","invertTransformX","transformX","invertTransformY","transformY","setPoint","resize","key","getLive2DModel","getParamFloat","weight","setParamFloat","addToParamFloat","multParamFloat","Sprite","console","error","UtSystem","UtDebug","LDTransform","LDGL","Live2D","Live2DModelWebGL","Live2DModelJS","Live2DMotion","MotionQueueManager","PhysicsHair","AMotion","PartsDataID","DrawDataID","BaseDataID","ParamID","LAppModel","prototype","constructor","call","randomMotionGroup","randomMotionPriority","modelHomeDir","modelSetting","tmpMatrix","audioElement","audioContext","audioAnalyser","callback","setUpdating","setInitialized","thisRef","path","getModelFile","loadModelData","i","getTextureNum","texPaths","getTextureFile","loadTexture","isTexLoaded","getExpressionNum","expressions","j","expName","getExpressionName","expFilePath","getExpressionFile","loadExpression","expressionManager","getPhysicsFile","loadPhysics","physics","getPoseFile","loadPose","pose","updateParam","live2DModel","getLayout","layout","modelMatrix","setWidth","setHeight","setX","setY","centerX","centerY","getInitParamNum","getInitParamID","getInitParamValue","getInitPartsVisibleNum","setPartsOpacity","getInitPartsVisibleID","getInitPartsVisibleValue","saveParam","preloadMotionGroup","mainMotionManager","stopAllMotions","close","getMotionNum","file","getMotionFile","loadMotion","motion","setFadeIn","getMotionFadeIn","setFadeOut","getMotionFadeOut","timeMSec","getUserTimeMSec","startTimeMSec","timeSec","t","Math","PI","isFinished","loadParam","dragX","dragY","lipSync","lipSyncValue","tmp","parseInt","random","setExpression","max","motionName","warn","setReservePriority","reserveMotion","log","motions","mtn","setFadeInFadeOut","getMotionSound","startMotionPrio","soundName","audio","document","getElementById","createAudioElement","src","AudioContext","webkitAudioContext","context","audioElementSource","createMediaElementSource","source","analyser","createAnalyser","fftSize","bufferLength","frequencyBinCount","cache","lastTime","Date","now","intervalId","setInterval","dataArray","Uint8Array","getByteFrequencyData","reduce","previous","current","lipValue","addEventListener","clearInterval","connect","destination","play","getMatrix","setMatrix","testX","testY","len","getHitAreaNum","hit","drawID","getHitAreaID","hitTestSimple","getHitAreaName","createElement","L2DBaseModel","L2DExpressionMotion","L2DExpressionParam","L2DEyeBlink","L2DMatrix44","L2DModelMatrix","L2DMotionManager","L2DPhysics","L2DPose","L2DPartsParam","L2DTargetPoint","L2DViewMatrix","debugMode","initialized","updating","alpha","accAlpha","accelX","accelY","accelZ","texCounter","getModelMatrix","setAlpha","a","getAlpha","isInitialized","v","isUpdating","setAccel","z","getMainMotionManager","getExpressionManager","buf","loadModel","_err","getError","getCanvasWidth","getCanvasHeight","setCenterPosition","_loadTexture","loadedImage","Image","onload","createTexture","isPremultipliedAlpha","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_FLIP_Y_WEBGL","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","LINEAR_MIPMAP_NEAREST","generateMipmap","setTexture","onerror","json","loadJson","e","drawIndex","getDrawDataIndex","points","getTransformedPoints","tx","ty","paramList","Array","EXPRESSION_DEFAULT","TYPE_SET","TYPE_ADD","TYPE_MULT","ret","fade_in","fade_out","params","paramNum","param","paramID","toString","parseFloat","val","calcTypeInt","calc","defaultValue","def","item","type","updateParamExe","motionQueueEnt","nextBlinkTime","stateStartTime","blinkIntervalMsec","eyeState","EYE_STATE","STATE_FIRST","closingMotionMsec","closedMotionMsec","openingMotionMsec","closeIfZero","eyeID_L","eyeID_R","calcNextBlink","time","r","setEyeMotion","eyeParamValue","STATE_CLOSING","STATE_CLOSED","STATE_OPENING","STATE_INTERVAL","tr","Float32Array","identity","mul","b","dst","c","n","k","getCopyMatrix","getScaleX","getScaleY","tr1","translate","translateX","translateY","scaleX","scaleY","w","h","setPosition","currentPriority","reservePriority","super","getCurrentPriority","getReservePriority","updated","physicsList","physics_hair","setup","resist","regist","mass","srcList","srcNum","Src","SRC_TO_X","typeStr","ptype","SRC_TO_Y","SRC_TO_G_ANGLE","addSrcParam","targetList","targets","targetNum","target","Target","TARGET_FROM_ANGLE","TARGET_FROM_ANGLE_V","addTargetParam","lastModel","partsGroups","poseListInfo","parts_visible","poseNum","i_pose","poseInfo","idListInfo","group","idNum","partsGroup","i_group","partsInfo","parts","link","linkListInfo","linkNum","i_link","linkParts","initParam","curTime","deltaTimeSec","normalizePartsOpacityGroup","copyOpacityOtherParts","initIndex","partsIndex","paramIndex","visibleParts","visibleOpacity","CLEAR_TIME_SEC","phi","maxBackOpacity","getPartsOpacity","opacity","a1","backOp","partsParam","getParamIndex","getPartsDataIndex","getID","EPSILON","faceTargetX","faceTargetY","faceX","faceY","faceVX","faceVY","lastTimeSec","FRAME_RATE","TIME_TO_MAX_SPEED","FACE_PARAM_MAX_V","MAX_V","curTimeSec","deltaTimeWeight","FRAME_TO_MAX_SPEED","MAX_A","dx","dy","abs","d","sqrt","vx","vy","ax","ay","max_v","cur_v","screenLeft","screenRight","screenTop","screenBottom","maxLeft","maxRight","maxTop","maxBottom","Number","MAX_VALUE","min","getMaxScale","getMinScale","setMaxScale","setMinScale","isMaxScale","isMinScale","tr2","tr3","getScreenLeft","getScreenRight","getScreenBottom","getScreenTop","getMaxLeft","getMaxRight","getMaxBottom","getMaxTop","loadBytes","request","XMLHttpRequest","open","responseType","status","response","send","mat4","MatrixStack","matrixStack","depth","currentMatrix","myError","matNew","multiply","glMatrix","scalar","SIMD","out","ARRAY_TYPE","clone","copy","fromValues","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","set","transpose","a01","a02","a03","a12","a13","a23","a0","a2","a3","tmp01","tmp23","out0","out1","out2","out3","Float32x4","shuffle","store","USE_SIMD","invert","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","row0","row1","row2","row3","tmp1","minor0","minor1","minor2","minor3","swizzle","sub","add","reciprocalApproximation","adjoint","determinant","b0","b1","b2","b3","vec","t0","rotate","rad","axis","s","b12","b20","b21","b22","sin","cos","rotateX","splat","a_1","a_2","rotateY","a_0","rotateZ","fromTranslation","fromScaling","fromRotation","fromXRotation","fromYRotation","fromZRotation","fromRotationTranslation","q","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","getTranslation","mat","getScaling","getRotation","trace","S","fromRotationTranslationScale","sx","sy","sz","fromRotationTranslationScaleOrigin","o","ox","oy","oz","fromQuat","yx","zx","zy","frustum","near","far","rl","tb","nf","perspective","fovy","aspect","f","tan","perspectiveFromFieldOfView","fov","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","ortho","lr","bt","lookAt","eye","center","up","x0","x1","y0","y1","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","str","frob","pow","subtract","multiplyScalar","multiplyScalarAndAdd","exactEquals","equals","a4","a5","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b13","b14","b15","module","exports","RANDOM","ENABLE_SIMD","self","global","SIMD_AVAILABLE","setMatrixArrayType","degree","toRadian","ModelSettingJson","NAME","ID","MODEL","TEXTURES","HIT_AREAS","PHYSICS","POSE","EXPRESSIONS","MOTION_GROUPS","SOUND","FADE_IN","FADE_OUT","LAYOUT","INIT_PARAM","INIT_PARTS_VISIBLE","VALUE","FILE","NaN"],"mappings":"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","file":"pixi-live2d.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"pixi.js\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"pixi.js\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"pixi.js\")) : factory(root[\"pixi.js\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_9__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 296447555bb580c15f53","import {\r\n  UtSystem,\r\n  UtDebug,\r\n  LDTransform,\r\n  LDGL,\r\n  Live2D,\r\n  Live2DModelWebGL,\r\n  Live2DModelJS,\r\n  Live2DMotion,\r\n  MotionQueueManager,\r\n  PhysicsHair,\r\n  AMotion,\r\n  PartsDataID,\r\n  DrawDataID,\r\n  BaseDataID,\r\n  ParamID\r\n} from '../src/lib/live2d';\r\nconst PIXI = require('pixi.js');\r\nimport LAppModel from './lib/LAppModel';\r\nimport { Live2DFramework, L2DTargetPoint, L2DViewMatrix, L2DMatrix44 } from './lib/Live2DFramework';\r\nimport MatrixStack from './lib/MatrixStack';\r\n\r\n/**\r\n * @class\r\n * @memberof PIXI\r\n * @param modelDefine {object} Content of {name}.model.js file\r\n * @param [options] {object} The optional parameters\r\n * @param [options.eyeBlink=true] {boolean}\r\n * @param [options.lipSyncWithSound=true] {boolean}\r\n * @param [options.debugLog=false] {boolean}\r\n * @param [options.debugMouseLog=false] {boolean}\r\n * @param [options.randomMotion=true] {boolean}\r\n * @param [options.defaultMotionGroup=\"idle\"] {string}\r\n * @param [options.priorityDefault=1] {number}\r\n * @param [options.priorityForce=3] {number}\r\n * @param [options.audioPlayer=3] {function} Custom audio player, pass (filename, rootPath) as parameters\r\n *\r\n */\r\nexport default class Live2DSprite extends PIXI.Sprite {\r\n  constructor(modelDefine, options) {\r\n    super();\r\n\r\n    this.interactive = true;\r\n\r\n    this.platform = window.navigator.platform.toLowerCase();\r\n\r\n    const fullOptions = Object.assign({\r\n      priorityForce: 3,\r\n      priorityDefault: 1,\r\n      debugLog: false,\r\n      debugMouseLog: false,\r\n      eyeBlink: true,\r\n      lipSyncWithSound: true,\r\n      randomMotion: true,\r\n      defaultMotionGroup: \"idle\",\r\n      audioPlayer: null,\r\n      modelBasePath: './'\r\n    }, options);\r\n\r\n    Live2D.init();\r\n    this.model = new LAppModel(fullOptions);\r\n\r\n    this.gl = null;\r\n    this.canvas = null;\r\n\r\n    this.dragMgr = null; /*new L2DTargetPoint();*/\r\n    this.viewMatrix = null; /*new L2DViewMatrix();*/\r\n    this.projMatrix = null; /*new L2DMatrix44()*/\r\n    this.deviceToScreen = null; /*new L2DMatrix44();*/\r\n\r\n    this.texture = null;\r\n\r\n    this.modelReady = false;\r\n    this.onModelReady = [];\r\n    this.modelDefine = modelDefine;\r\n\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  init() {\r\n\r\n\r\n    var width = this.canvas.width;\r\n    var height = this.canvas.height;\r\n\r\n    this.texture = PIXI.RenderTexture.create(width, height);\r\n\r\n    this.canvasWidth = this.canvas.width;\r\n    this.canvasHeight = this.canvas.height;\r\n\r\n    this.dragMgr = new L2DTargetPoint();\r\n\r\n    var ratio = height / width;\r\n    var left = -1;\r\n    var right = 1;\r\n    var bottom = -ratio;\r\n    var top = ratio;\r\n\r\n    this.viewMatrix = new L2DViewMatrix();\r\n    this.viewMatrix.setMaxScreenRect(-2, 2, -2, 2);\r\n    this.viewMatrix.setScreenRect(left, right, bottom, top);\r\n    // this.viewMatrix.setMaxScale(2);\r\n    // this.viewMatrix.setMinScale(0.5);\r\n    // this.viewMatrix.adjustScale(0, 0, 0.7);\r\n\r\n    this.projMatrix = new L2DMatrix44();\r\n    this.projMatrix.multScale(ratio, 1);  // flip for rtt\r\n\r\n    this.deviceToScreen = new L2DMatrix44();\r\n    this.deviceToScreen.multTranslate(-width / 2.0, -height / 2.0);\r\n    this.deviceToScreen.multScale(2 / width, -2 / height);\r\n\r\n    Live2D.setGL(this.gl);\r\n\r\n    this.x = width / 2;\r\n    this.y = height / 2;\r\n    this.anchor.x = 0.5;\r\n    this.anchor.y = 0.5;\r\n    this.scale.y = -1;\r\n\r\n    this.gl.clearColor(0.0, 0.0, 0.0, 0.0);\r\n    this.model.load(this.gl, this.modelDefine, () => {\r\n      this.modelReady = true;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  draw() {\r\n    MatrixStack.reset();\r\n    MatrixStack.loadIdentity();\r\n\r\n    this.dragMgr.update();\r\n    this.model.setDrag(this.dragMgr.getX(), this.dragMgr.getY());\r\n\r\n    // this.viewMatrix.adjustTranslate(-this.x / this.canvasWidth, -this.y / this.canvasHeight);\r\n    // this.viewMatrix.adjustScale(this.anchor.x, this.anchor.y, this.scale.x, this.scale.y);\r\n\r\n    MatrixStack.multMatrix(this.projMatrix.getArray());\r\n    MatrixStack.multMatrix(this.viewMatrix.getArray());\r\n    // MatrixStack.multMatrix(this.deviceToScreen.getArray());\r\n    MatrixStack.push();\r\n\r\n    this.model.update();\r\n    this.model.draw(this.gl);\r\n\r\n    MatrixStack.pop();\r\n  }\r\n\r\n  drawModel() {\r\n    this.model.update();\r\n    this.model.draw(this.gl);\r\n  }\r\n\r\n  _renderWebGL(renderer) {\r\n    if (!this.gl) {\r\n      this.gl = renderer.gl;\r\n      this.canvas = renderer.view;\r\n      this.modelDefine && this.init(this.modelDefine);\r\n    }\r\n\r\n    if (!this.modelReady) {\r\n      const gl = renderer.gl;\r\n      // it is unreasonable how the next line works...😂\r\n      gl.activeTexture(gl.TEXTURE0);\r\n      return;\r\n    }\r\n\r\n    while (this.onModelReady.length) {\r\n      const func = this.onModelReady.shift();\r\n      func();\r\n    }\r\n\r\n    if (!this.visible) {\r\n      return;\r\n    }\r\n\r\n    const useVAO = !!(renderer.createVao && renderer.bindVao);\r\n\r\n    let _activeVao;\r\n    if (useVAO) {\r\n      _activeVao = renderer._activeVao;\r\n    } else {\r\n      renderer.flush();\r\n    }\r\n\r\n    const gl = renderer.gl;\r\n\r\n    const arrayBuffer = gl.getParameter(gl.ARRAY_BUFFER_BINDING);\r\n    const elementArrayBuffer = gl.getParameter(gl.ELEMENT_ARRAY_BUFFER_BINDING);\r\n    const currentProgram = gl.getParameter(gl.CURRENT_PROGRAM);\r\n\r\n    let activeTexture;\r\n    if (!useVAO) {\r\n      activeTexture = gl.getParameter(gl.ACTIVE_TEXTURE);\r\n    }\r\n\r\n    gl.activeTexture(gl.TEXTURE0);\r\n    const texture0 = gl.getParameter(gl.TEXTURE_BINDING_2D);\r\n    gl.activeTexture(gl.TEXTURE1);\r\n    const texture1 = gl.getParameter(gl.TEXTURE_BINDING_2D);\r\n\r\n    const frontFace = gl.getParameter(gl.FRONT_FACE);\r\n    const colorWhiteMask = gl.getParameter(gl.COLOR_WRITEMASK);\r\n\r\n    let vertexAttr0Enabled, vertexAttr1Enabled, vertexAttr2Enabled, vertexAttr3Enabled;\r\n    if (!useVAO) {\r\n      vertexAttr0Enabled = gl.getVertexAttrib(0, gl.VERTEX_ATTRIB_ARRAY_ENABLED);\r\n      vertexAttr1Enabled = gl.getVertexAttrib(1, gl.VERTEX_ATTRIB_ARRAY_ENABLED);\r\n      vertexAttr2Enabled = gl.getVertexAttrib(2, gl.VERTEX_ATTRIB_ARRAY_ENABLED);\r\n      vertexAttr3Enabled = gl.getVertexAttrib(3, gl.VERTEX_ATTRIB_ARRAY_ENABLED);\r\n    }\r\n    const scissorTestEnabled = gl.isEnabled(gl.SCISSOR_TEST);\r\n    const stencilTestEnabled = gl.isEnabled(gl.STENCIL_TEST);\r\n    const depthTestEnabled = gl.isEnabled(gl.DEPTH_TEST);\r\n    const cullFaceEnabled = gl.isEnabled(gl.CULL_FACE);\r\n    const blendEnabled = gl.isEnabled(gl.BLEND);\r\n\r\n    const _activeTextureLocation = renderer._activeTexture ? renderer._activeTextureLocation : 0;\r\n    const _activeRenderTarget = renderer._activeRenderTarget;\r\n\r\n    let vao;\r\n    if (useVAO) {\r\n      vao = renderer.createVao();\r\n      renderer.bindVao(vao);\r\n    }\r\n    renderer.bindRenderTexture(this.texture);\r\n    gl.clearColor(0.0, 0.0, 0.0, 0.0);\r\n    gl.clear(gl.COLOR_BUFFER_BIT);\r\n    gl.frontFace(gl.CW);\r\n    this.draw();\r\n    if (!useVAO) {\r\n      renderer._activeTextureLocation = _activeTextureLocation;\r\n      gl.activeTexture(gl.TEXTURE0 + _activeTextureLocation);\r\n    }\r\n    gl.bindTexture(gl.TEXTURE_2D, null);\r\n    gl.useProgram(currentProgram);\r\n    renderer.bindRenderTarget(_activeRenderTarget);\r\n\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, arrayBuffer);\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, elementArrayBuffer);\r\n\r\n    gl.activeTexture(gl.TEXTURE0);\r\n    gl.bindTexture(gl.TEXTURE_2D, texture0);\r\n    gl.activeTexture(gl.TEXTURE1);\r\n    gl.bindTexture(gl.TEXTURE_2D, texture1);\r\n\r\n    if (!useVAO) {\r\n      gl.activeTexture(activeTexture);\r\n    }\r\n    gl.frontFace(frontFace);\r\n    gl.colorMask(...colorWhiteMask);\r\n    //\r\n    if (!useVAO) {\r\n      vertexAttr0Enabled ? gl.enableVertexAttribArray(0) : gl.disableVertexAttribArray(0);\r\n      vertexAttr1Enabled ? gl.enableVertexAttribArray(1) : gl.disableVertexAttribArray(1);\r\n      vertexAttr2Enabled ? gl.enableVertexAttribArray(2) : gl.disableVertexAttribArray(2);\r\n      vertexAttr3Enabled ? gl.enableVertexAttribArray(3) : gl.disableVertexAttribArray(3);\r\n    }\r\n    scissorTestEnabled ? gl.enable(gl.SCISSOR_TEST) : gl.disable(gl.SCISSOR_TEST);\r\n    stencilTestEnabled ? gl.enable(gl.STENCIL_TEST) : gl.disable(gl.STENCIL_TEST);\r\n    depthTestEnabled ? gl.enable(gl.DEPTH_TEST) : gl.disable(gl.DEPTH_TEST);\r\n    cullFaceEnabled ? gl.enable(gl.CULL_FACE) : gl.disable(gl.CULL_FACE);\r\n    blendEnabled ? gl.enable(gl.BLEND) : gl.disable(gl.BLEND);\r\n\r\n    if (useVAO) {\r\n      vao.unbind();\r\n      vao.destroy();\r\n      renderer.bindVao(_activeVao);\r\n    }\r\n\r\n    super._renderWebGL(renderer);\r\n  }\r\n\r\n  destroy(...args) {\r\n    this.model.release(this.gl);\r\n    super.destroy(...args);\r\n  }\r\n\r\n  containsPoint(point) {\r\n    if (this.modelReady) {\r\n      return this.hitTest(null, point.x, point.y);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /* Live2D methods */\r\n\r\n\r\n  /* Transforms */\r\n\r\n  adjustScale(cx, cy, scale) {\r\n    this.onModelReady.push(() => {\r\n      this.viewMatrix.adjustScale(cx, cy, scale);\r\n    });\r\n  }\r\n\r\n  adjustTranslate(shiftX, shiftY) {\r\n    this.onModelReady.push(() => {\r\n      this.viewMatrix.adjustTranslate(shiftX, -shiftY);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * specify `PARAM_MOUTH_OPEN_Y` of Live2D model.\r\n   * @param value {Number} between 0~1, set to `null` will disable it.\r\n   */\r\n  setLipSync(value) {\r\n    if (value === null) {\r\n      this.model.setLipSync(false);\r\n    } else {\r\n      this.model.setLipSync(true);\r\n      this.model.setLipSyncValue(value);\r\n    }\r\n  }\r\n\r\n  setRandomExpression() {\r\n    this.onModelReady.push(() => {\r\n      this.model.setRandomExpression();\r\n    });\r\n  }\r\n  startRandomMotion(name, priority) {\r\n    this.onModelReady.push(() => {\r\n      this.model.startRandomMotion(name, priority);\r\n    });\r\n  }\r\n  startRandomMotionOnce(name, priority) {\r\n    this.onModelReady.push(() => {\r\n      this.model.startRandomMotionOnce(name, priority);\r\n    });\r\n  }\r\n  stopRandomMotion() {\r\n    this.onModelReady.push(() => {\r\n      this.model.stopRandomMotion();\r\n    });\r\n  }\r\n  startMotion(name, no, priority) {\r\n    this.onModelReady.push(() => {\r\n      this.model.startMotion(name, no, priority);\r\n    });\r\n  }\r\n  playSound(filename, host = '/') {\r\n    this.onModelReady.push(() => {\r\n      this.model.playSound(filename, host);\r\n    });\r\n  }\r\n\r\n  /* Event methods */\r\n  hitTest(id, x, y) {\r\n    if (this.modelReady) {\r\n      return this.model.hitTest(id,\r\n        this.viewMatrix.invertTransformX(this.deviceToScreen.transformX(x)),\r\n        this.viewMatrix.invertTransformY(this.deviceToScreen.transformY(y)));\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  setViewPoint(x, y) {\r\n    if (this.modelReady) {\r\n      this.dragMgr.setPoint(this.viewMatrix.invertTransformX(this.deviceToScreen.transformX(x)),\r\n        this.viewMatrix.invertTransformY(this.deviceToScreen.transformY(y)));\r\n    }\r\n  }\r\n\r\n  resize(width, height) {\r\n    this.texture.resize(width, height);\r\n    this.x = width / 2;\r\n    this.y = height / 2\r\n    var ratio = height / width;\r\n    var left = -1;\r\n    var right = 1;\r\n    var bottom = -ratio;\r\n    var top = ratio;\r\n\r\n    this.viewMatrix = new L2DViewMatrix();\r\n    this.viewMatrix.setMaxScreenRect(-2, 2, -2, 2);\r\n    this.viewMatrix.setScreenRect(left, right, bottom, top);\r\n\r\n    this.projMatrix = new L2DMatrix44();\r\n    this.projMatrix.multScale(ratio, 1);\r\n\r\n    this.deviceToScreen = new L2DMatrix44();\r\n    this.deviceToScreen.multTranslate(-width / 2.0, -height / 2.0);\r\n    this.deviceToScreen.multScale(2 / width, -2 / height);\r\n  }\r\n\r\n\r\n  /* Some raw methods of Live2D */\r\n  getParamFloat(key) {\r\n    return this.model.getLive2DModel().getParamFloat(key);\r\n  }\r\n  setParamFloat(key, value, weight = 1) {\r\n    this.model.getLive2DModel().setParamFloat(key, value, weight);\r\n  }\r\n  addToParamFloat(key, value, weight = 1) {\r\n    this.model.getLive2DModel().addToParamFloat(key, value, weight);\r\n  }\r\n  multParamFloat(key, value, weight = 1) {\r\n    this.model.getLive2DModel().multParamFloat(key, value, weight);\r\n  }\r\n\r\n}\r\n\r\nif (PIXI) {\r\n  PIXI.Live2DSprite = Live2DSprite;\r\n} else {\r\n  console.error('Error: Cannot find global variable `PIXI`, Live2D plguin will not be installed.');\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","// const log = console.log;\r\n// console.log = () => {};\r\n// const __ = require('./live2dsdk');\r\n// console.log = log;\r\n\r\nexport {\r\n  UtSystem,\r\n  UtDebug,\r\n  LDTransform,\r\n  LDGL,\r\n  Live2D,\r\n  Live2DModelWebGL,\r\n  Live2DModelJS,\r\n  Live2DMotion,\r\n  MotionQueueManager,\r\n  PhysicsHair,\r\n  AMotion,\r\n  PartsDataID,\r\n  DrawDataID,\r\n  BaseDataID,\r\n  ParamID\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/live2d.js","//============================================================\r\n//============================================================\r\n//  class LAppModel     extends L2DBaseModel\r\n//============================================================\r\n//============================================================\r\n\r\nimport { L2DBaseModel, L2DEyeBlink } from './Live2DFramework';\r\nimport MatrixStack from './MatrixStack';\r\nimport ModelSettingJson from './ModelSettingJson';\r\n\r\nexport default function LAppModel(options)\r\n{\r\n    //L2DBaseModel.apply(this, arguments);\r\n    L2DBaseModel.prototype.constructor.call(this);\r\n\r\n    this.options = options;\r\n\r\n    this.randomMotion = this.options.randomMotion;\r\n    this.randomMotionGroup = null;\r\n    this.randomMotionPriority = null;\r\n\r\n    this.modelHomeDir = \"\";\r\n    this.modelSetting = null;\r\n    this.tmpMatrix = [];\r\n\r\n    this.audioElement = null;\r\n    this.audioContext = null;\r\n    this.audioAnalyser = null;\r\n}\r\n\r\nLAppModel.prototype = new L2DBaseModel();\r\n\r\n\r\nLAppModel.prototype.load = function(gl, modelDefine, callback)\r\n{\r\n    this.setUpdating(true);\r\n    this.setInitialized(false);\r\n\r\n    this.modelHomeDir = this.options.modelBasePath;\r\n\r\n    this.modelSetting = new ModelSettingJson(modelDefine);\r\n\r\n    var thisRef = this;\r\n\r\n    // this.modelSetting.loadModelSetting(modelSettingPath, function(){\r\n\r\n        var path = thisRef.modelHomeDir + thisRef.modelSetting.getModelFile();\r\n        thisRef.loadModelData(path, function(model){\r\n\r\n            for (var i = 0; i < thisRef.modelSetting.getTextureNum(); i++)\r\n            {\r\n\r\n                var texPaths = thisRef.modelHomeDir +\r\n                    thisRef.modelSetting.getTextureFile(i);\r\n\r\n                thisRef.loadTexture(gl, i, texPaths, function() {\r\n\r\n                    if( thisRef.isTexLoaded ) {\r\n\r\n                        if (thisRef.modelSetting.getExpressionNum() > 0)\r\n                        {\r\n\r\n                            thisRef.expressions = {};\r\n\r\n                            for (var j = 0; j < thisRef.modelSetting.getExpressionNum(); j++)\r\n                            {\r\n                                var expName = thisRef.modelSetting.getExpressionName(j);\r\n                                var expFilePath = thisRef.modelHomeDir +\r\n                                    thisRef.modelSetting.getExpressionFile(j);\r\n\r\n                                thisRef.loadExpression(expName, expFilePath);\r\n                            }\r\n                        }\r\n                        else\r\n                        {\r\n                            thisRef.expressionManager = null;\r\n                            thisRef.expressions = {};\r\n                        }\r\n\r\n\r\n\r\n                        if (!thisRef.eyeBlink)\r\n                        {\r\n                            thisRef.eyeBlink = new L2DEyeBlink();\r\n                        }\r\n\r\n\r\n                        if (thisRef.modelSetting.getPhysicsFile())\r\n                        {\r\n                            thisRef.loadPhysics(thisRef.modelHomeDir +\r\n                                                thisRef.modelSetting.getPhysicsFile());\r\n                        }\r\n                        else\r\n                        {\r\n                            thisRef.physics = null;\r\n                        }\r\n\r\n\r\n\r\n                        if (thisRef.modelSetting.getPoseFile())\r\n                        {\r\n                            thisRef.loadPose(\r\n                                thisRef.modelHomeDir +\r\n                                thisRef.modelSetting.getPoseFile(),\r\n                                function() {\r\n                                    thisRef.pose.updateParam(thisRef.live2DModel);\r\n                                }\r\n                            );\r\n                        }\r\n                        else\r\n                        {\r\n                            thisRef.pose = null;\r\n                        }\r\n\r\n\r\n\r\n                        if (thisRef.modelSetting.getLayout())\r\n                        {\r\n                            var layout = thisRef.modelSetting.getLayout();\r\n                            if (layout[\"width\"] != null)\r\n                                thisRef.modelMatrix.setWidth(layout[\"width\"]);\r\n                            if (layout[\"height\"] != null)\r\n                                thisRef.modelMatrix.setHeight(layout[\"height\"]);\r\n                            if (layout[\"x\"] != null)\r\n                                thisRef.modelMatrix.setX(layout[\"x\"]);\r\n                            if (layout[\"y\"] != null)\r\n                                thisRef.modelMatrix.setY(layout[\"y\"]);\r\n                            if (layout[\"center_x\"] != null)\r\n                                thisRef.modelMatrix.centerX(layout[\"center_x\"]);\r\n                            if (layout[\"center_y\"] != null)\r\n                                thisRef.modelMatrix.centerY(layout[\"center_y\"]);\r\n                            if (layout[\"top\"] != null)\r\n                                thisRef.modelMatrix.top(layout[\"top\"]);\r\n                            if (layout[\"bottom\"] != null)\r\n                                thisRef.modelMatrix.bottom(layout[\"bottom\"]);\r\n                            if (layout[\"left\"] != null)\r\n                                thisRef.modelMatrix.left(layout[\"left\"]);\r\n                            if (layout[\"right\"] != null)\r\n                                thisRef.modelMatrix.right(layout[\"right\"]);\r\n                        }\r\n\r\n                        for (var j = 0; j < thisRef.modelSetting.getInitParamNum(); j++)\r\n                        {\r\n\r\n                            thisRef.live2DModel.setParamFloat(\r\n                                thisRef.modelSetting.getInitParamID(j),\r\n                                thisRef.modelSetting.getInitParamValue(j)\r\n                            );\r\n                        }\r\n\r\n                        for (var j = 0; j < thisRef.modelSetting.getInitPartsVisibleNum(); j++)\r\n                        {\r\n\r\n                            thisRef.live2DModel.setPartsOpacity(\r\n                                thisRef.modelSetting.getInitPartsVisibleID(j),\r\n                                thisRef.modelSetting.getInitPartsVisibleValue(j)\r\n                            );\r\n                        }\r\n\r\n\r\n\r\n                        thisRef.live2DModel.saveParam();\r\n                        // thisRef.live2DModel.setGL(gl);\r\n\r\n\r\n                        thisRef.preloadMotionGroup(thisRef.options.defaultMotionGroup);\r\n                        thisRef.mainMotionManager.stopAllMotions();\r\n\r\n                        thisRef.setUpdating(false);\r\n                        thisRef.setInitialized(true);\r\n\r\n                        if (typeof callback == \"function\") callback();\r\n\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    // });\r\n};\r\n\r\n\r\n\r\nLAppModel.prototype.release = function(gl)\r\n{\r\n    // this.live2DModel.deleteTextures();\r\n    // var pm = Live2DFramework.getPlatformManager();\r\n    //\r\n    // gl.deleteTexture(pm.texture);\r\n    this.audioContext.close();\r\n}\r\n\r\n\r\n\r\nLAppModel.prototype.preloadMotionGroup = function(name)\r\n{\r\n    var thisRef = this;\r\n\r\n    for (var i = 0; i < this.modelSetting.getMotionNum(name); i++)\r\n    {\r\n        var file = this.modelSetting.getMotionFile(name, i);\r\n        this.loadMotion(file, this.modelHomeDir + file, function(motion) {\r\n            motion.setFadeIn(thisRef.modelSetting.getMotionFadeIn(name, i));\r\n            motion.setFadeOut(thisRef.modelSetting.getMotionFadeOut(name, i));\r\n        });\r\n\r\n    }\r\n}\r\n\r\n\r\nLAppModel.prototype.update = function()\r\n{\r\n    // console.log(\"--> LAppModel.update()\");\r\n\r\n    if(!this.live2DModel)\r\n    {\r\n        if (this.options.debugLog) console.error(\"Failed to update.\");\r\n\r\n        return;\r\n    }\r\n\r\n    var timeMSec = UtSystem.getUserTimeMSec() - this.startTimeMSec;\r\n    var timeSec = timeMSec / 1000.0;\r\n    var t = timeSec * 2 * Math.PI;\r\n\r\n\r\n    if (this.mainMotionManager.isFinished() && this.randomMotion)\r\n    {\r\n        this.startRandomMotion(this.randomMotionGroup || this.options.defaultMotionGroup, this.randomMotionPriority || this.options.priorityDefault);\r\n    }\r\n\r\n    //-----------------------------------------------------------------\r\n\r\n\r\n    this.live2DModel.loadParam();\r\n\r\n\r\n\r\n    var update = this.mainMotionManager.updateParam(this.live2DModel);\r\n    if (!update) {\r\n\r\n        if(this.eyeBlink && this.options.eyeBlink) {\r\n            this.eyeBlink.updateParam(this.live2DModel);\r\n        }\r\n    }\r\n\r\n\r\n    this.live2DModel.saveParam();\r\n\r\n    //-----------------------------------------------------------------\r\n\r\n\r\n    if (this.expressionManager &&\r\n        this.expressions &&\r\n        !this.expressionManager.isFinished())\r\n    {\r\n        this.expressionManager.updateParam(this.live2DModel);\r\n    }\r\n\r\n\r\n\r\n    this.live2DModel.addToParamFloat(\"PARAM_ANGLE_X\", this.dragX * 30, 1);\r\n    this.live2DModel.addToParamFloat(\"PARAM_ANGLE_Y\", this.dragY * 30, 1);\r\n    this.live2DModel.addToParamFloat(\"PARAM_ANGLE_Z\", (this.dragX * this.dragY) * -30, 1);\r\n\r\n\r\n\r\n    this.live2DModel.addToParamFloat(\"PARAM_BODY_ANGLE_X\", this.dragX*10, 1);\r\n\r\n\r\n\r\n    this.live2DModel.addToParamFloat(\"PARAM_EYE_BALL_X\", this.dragX, 1);\r\n    this.live2DModel.addToParamFloat(\"PARAM_EYE_BALL_Y\", this.dragY, 1);\r\n\r\n\r\n\r\n    // this.live2DModel.addToParamFloat(\"PARAM_ANGLE_X\",\r\n    //                                  Number((15 * Math.sin(t / 6.5345))), 0.5);\r\n    // this.live2DModel.addToParamFloat(\"PARAM_ANGLE_Y\",\r\n    //                                  Number((8 * Math.sin(t / 3.5345))), 0.5);\r\n    // this.live2DModel.addToParamFloat(\"PARAM_ANGLE_Z\",\r\n    //                                  Number((10 * Math.sin(t / 5.5345))), 0.5);\r\n    // this.live2DModel.addToParamFloat(\"PARAM_BODY_ANGLE_X\",\r\n    //                                  Number((4 * Math.sin(t / 15.5345))), 0.5);\r\n    // this.live2DModel.setParamFloat(\"PARAM_BREATH\",\r\n    //                                Number((0.5 + 0.5 * Math.sin(t / 3.2345))), 1);\r\n\r\n\r\n    if (this.physics)\r\n    {\r\n        this.physics.updateParam(this.live2DModel);\r\n    }\r\n\r\n    if (this.lipSync)\r\n    {\r\n        this.live2DModel.setParamFloat(\"PARAM_MOUTH_OPEN_Y\",\r\n                                       this.lipSyncValue);\r\n    }\r\n\r\n\r\n    if( this.pose ) {\r\n        this.pose.updateParam(this.live2DModel);\r\n    }\r\n\r\n    this.live2DModel.update();\r\n};\r\n\r\n\r\n\r\nLAppModel.prototype.setRandomExpression = function()\r\n{\r\n    var tmp = [];\r\n    for (var name in this.expressions)\r\n    {\r\n        tmp.push(name);\r\n    }\r\n\r\n    var no = parseInt(Math.random() * tmp.length);\r\n\r\n    this.setExpression(tmp[no]);\r\n}\r\n\r\n\r\n\r\nLAppModel.prototype.startRandomMotion = function(name, priority)\r\n{\r\n    var max = this.modelSetting.getMotionNum(name);\r\n    var no = parseInt(Math.random() * max);\r\n    this.startMotion(name, no, priority);\r\n    this.randomMotion = true;\r\n    this.randomMotionGroup = name;\r\n    this.randomMotionPriority = priority;\r\n}\r\nLAppModel.prototype.startRandomMotionOnce = function(name, priority)\r\n{\r\n    var max = this.modelSetting.getMotionNum(name);\r\n    var no = parseInt(Math.random() * max);\r\n    this.startMotion(name, no, priority);\r\n}\r\n\r\nLAppModel.prototype.stopRandomMotion = function()\r\n{\r\n    this.randomMotion = false;\r\n    this.randomMotionGroup = null;\r\n    this.randomMotionPriority = null;\r\n}\r\n\r\n\r\n\r\nLAppModel.prototype.startMotion = function(name, no, priority)\r\n{\r\n    // console.log(\"startMotion : \" + name + \" \" + no + \" \" + priority);\r\n\r\n    var motionName = this.modelSetting.getMotionFile(name, no);\r\n\r\n    if (motionName == null || motionName == \"\")\r\n    {\r\n        if (this.options.debugLog)\r\n            console.warn(\"Failed to motion.\");\r\n        return;\r\n    }\r\n\r\n    if (priority == this.options.priorityForce)\r\n    {\r\n        this.mainMotionManager.setReservePriority(priority);\r\n    }\r\n    else if (!this.mainMotionManager.reserveMotion(priority))\r\n    {\r\n        if (this.options.debugLog)\r\n            console.log(\"Motion is running.\")\r\n        return;\r\n    }\r\n\r\n    var thisRef = this;\r\n    var motion;\r\n\r\n    if (this.motions[name] == null)\r\n    {\r\n        this.loadMotion(null, this.modelHomeDir + motionName, function(mtn) {\r\n            motion = mtn;\r\n\r\n\r\n            thisRef.setFadeInFadeOut(name, no, priority, motion);\r\n\r\n        });\r\n    }\r\n    else\r\n    {\r\n        motion = this.motions[name];\r\n\r\n\r\n        thisRef.setFadeInFadeOut(name, no, priority, motion);\r\n    }\r\n}\r\n\r\n\r\nLAppModel.prototype.setFadeInFadeOut = function(name, no, priority, motion)\r\n{\r\n    var motionName = this.modelSetting.getMotionFile(name, no);\r\n\r\n    motion.setFadeIn(this.modelSetting.getMotionFadeIn(name, no));\r\n    motion.setFadeOut(this.modelSetting.getMotionFadeOut(name, no));\r\n\r\n\r\n    if (this.options.debugLog)\r\n            console.log(\"Start motion : \" + motionName);\r\n\r\n    if (this.modelSetting.getMotionSound(name, no) == null)\r\n    {\r\n        this.mainMotionManager.startMotionPrio(motion, priority);\r\n    }\r\n    else\r\n    {\r\n        var soundName = this.modelSetting.getMotionSound(name, no);\r\n        // var player = new Sound(this.modelHomeDir + soundName);\r\n\r\n        if (this.options.debugLog)\r\n            console.log(\"Start sound : \" + soundName);\r\n\r\n        this.playSound(soundName, this.modelHomeDir);\r\n\r\n        this.mainMotionManager.startMotionPrio(motion, priority);\r\n    }\r\n}\r\n\r\nLAppModel.prototype.playSound = function(filename, host)\r\n{\r\n    if (this.options.audioPlayer) {\r\n        this.options.audioPlayer(filename, host);\r\n    } else {\r\n        const audio = this.audioElement || document.getElementById(\"live2d-audio\") || LAppModel.createAudioElement();\r\n        !this.audioElement && (this.audioElement = audio);\r\n        audio.src = host + filename;\r\n\r\n        const AudioContext = window.AudioContext || window.webkitAudioContext;\r\n        if (AudioContext && this.options.lipSyncWithSound) {\r\n            const context = this.audioContext || new AudioContext();\r\n            if (!this.audioContext) {\r\n                this.audioContext = context;\r\n                this.audioElementSource = context.createMediaElementSource(audio);\r\n            }\r\n            const source = this.audioElementSource;\r\n            const analyser = this.audioAnalyser || context.createAnalyser();\r\n            !this.audioAnalyser && (this.audioAnalyser = analyser);\r\n\r\n            analyser.fftSize = 32;\r\n            var bufferLength = analyser.frequencyBinCount;\r\n            let cache = [];\r\n            let lastTime = Date.now();\r\n            const intervalId = setInterval(() => {\r\n                const dataArray = new Uint8Array(bufferLength);\r\n                analyser.getByteFrequencyData(dataArray);\r\n                const value = (dataArray.reduce((previous, current) => current += previous)) / bufferLength;\r\n                if (Date.now() - lastTime  < 33) {\r\n                    cache.push(value);\r\n                } else {\r\n                    const lipValue = cache.length ?\r\n                    (cache.reduce((previous, current) => current += previous) * 0.008 / cache.length )\r\n                    : this.lipSyncValue;\r\n                    this.lipSync = true;\r\n                    this.lipSyncValue = lipValue;\r\n                    lastTime = Date.now();\r\n                    cache = [];\r\n                }\r\n            }, 0);\r\n\r\n            audio.addEventListener('ended', () => {\r\n                clearInterval(intervalId);\r\n                this.lipSyncValue = 0;\r\n            });\r\n            source.connect(analyser);\r\n            analyser.connect(context.destination);\r\n        }\r\n        audio.play();\r\n    }\r\n}\r\n\r\n\r\nLAppModel.prototype.setExpression = function(name)\r\n{\r\n    var motion = this.expressions[name];\r\n\r\n    if (this.options.debugLog)\r\n        console.log(\"Expression : \" + name);\r\n\r\n    this.expressionManager.startMotion(motion, false);\r\n}\r\n\r\n\r\n\r\nLAppModel.prototype.draw = function(gl)\r\n{\r\n    //console.log(\"--> LAppModel.draw()\");\r\n\r\n    // if(this.live2DModel == null) return;\r\n\r\n\r\n    MatrixStack.push();\r\n\r\n    MatrixStack.multMatrix(this.modelMatrix.getArray());\r\n\r\n    this.tmpMatrix = MatrixStack.getMatrix()\r\n    this.live2DModel.setMatrix(this.tmpMatrix);\r\n    this.live2DModel.draw();\r\n\r\n    MatrixStack.pop();\r\n\r\n};\r\n\r\n\r\n\r\nLAppModel.prototype.hitTest = function(id, testX, testY)\r\n{\r\n    var len = this.modelSetting.getHitAreaNum();\r\n    let hit = false;\r\n    for (var i = 0; i < len; i++)\r\n    {\r\n        // NOTE: id == null means to test all ids.\r\n        if (id == null) {\r\n            var drawID = this.modelSetting.getHitAreaID(i);\r\n            hit = this.hitTestSimple(drawID, testX, testY);\r\n            if (hit) {\r\n                return hit;\r\n            }\r\n        } else if (id == this.modelSetting.getHitAreaName(i)) {\r\n            var drawID = this.modelSetting.getHitAreaID(i);\r\n\r\n            return this.hitTestSimple(drawID, testX, testY);\r\n        }\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nLAppModel.createAudioElement = function () {\r\n    var audio = document.createElement(\"audio\");\r\n    if (audio) {\r\n        audio.id = \"live2d-audio\";\r\n        return audio;\r\n    }\r\n    return null;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/LAppModel.js","/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n import {\r\n   UtSystem,\r\n   UtDebug,\r\n   LDTransform,\r\n   LDGL,\r\n   Live2D,\r\n   Live2DModelWebGL,\r\n   Live2DModelJS,\r\n   Live2DMotion,\r\n   MotionQueueManager,\r\n   PhysicsHair,\r\n   AMotion,\r\n   PartsDataID,\r\n   DrawDataID,\r\n   BaseDataID,\r\n   ParamID\r\n} from './live2d';\r\nimport { loadBytes } from './netUtils';\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DBaseModel\r\n//============================================================\r\n//============================================================\r\nexport function L2DBaseModel()\r\n{\r\n    this.live2DModel     = null; // ALive2DModel\r\n    this.modelMatrix     = null; // L2DModelMatrix\r\n    this.eyeBlink        = null; // L2DEyeBlink\r\n    this.physics         = null; // L2DPhysics\r\n    this.pose            = null; // L2DPose\r\n    this.debugMode       = false;\r\n    this.initialized     = false;\r\n    this.updating        = false;\r\n    this.alpha           = 1;\r\n    this.accAlpha        = 0;\r\n    this.lipSync         = false;\r\n    this.lipSyncValue    = 0;\r\n    this.accelX          = 0;\r\n    this.accelY          = 0;\r\n    this.accelZ          = 0;\r\n    this.dragX           = 0;\r\n    this.dragY           = 0;\r\n    this.startTimeMSec   = null;\r\n    this.mainMotionManager = new L2DMotionManager(); //L2DMotionManager\r\n    this.expressionManager = new L2DMotionManager(); //L2DMotionManager\r\n    this.motions = {};\r\n    this.expressions = {};\r\n\r\n    this.isTexLoaded = false;\r\n}\r\n\r\nvar texCounter = 0;\r\n\r\n//============================================================\r\n//    L2DBaseModel # getModelMatrix()\r\n//============================================================\r\nL2DBaseModel.prototype.getModelMatrix  = function()\r\n{\r\n    return this.modelMatrix;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # setAlpha()\r\n//============================================================\r\nL2DBaseModel.prototype.setAlpha        = function(a/*float*/)\r\n{\r\n    if( a > 0.999 ) a = 1;\r\n    if( a < 0.001 ) a = 0;\r\n    this.alpha = a;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # getAlpha()\r\n//============================================================\r\nL2DBaseModel.prototype.getAlpha        = function()\r\n{\r\n    return this.alpha;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # isInitialized()\r\n//============================================================\r\nL2DBaseModel.prototype.isInitialized   = function()\r\n{\r\n    return this.initialized;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # setInitialized()\r\n//============================================================\r\nL2DBaseModel.prototype.setInitialized  = function( v/*boolean*/)\r\n{\r\n    this.initialized = v;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # isUpdating()\r\n//============================================================\r\nL2DBaseModel.prototype.isUpdating      = function()\r\n{\r\n    return this.updating;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # setUpdating()\r\n//============================================================\r\nL2DBaseModel.prototype.setUpdating     = function(v/*boolean*/)\r\n{\r\n    this.updating = v;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # getLive2DModel()\r\n//============================================================\r\nL2DBaseModel.prototype.getLive2DModel  = function()\r\n{\r\n    return this.live2DModel;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # setLipSync()\r\n//============================================================\r\nL2DBaseModel.prototype.setLipSync      = function(v/*boolean*/)\r\n{\r\n    this.lipSync = v;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # setLipSyncValue()\r\n//============================================================\r\nL2DBaseModel.prototype.setLipSyncValue = function(v/*float*/)\r\n{\r\n    this.lipSyncValue = v;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # setAccel()\r\n//============================================================\r\nL2DBaseModel.prototype.setAccel        = function(x/*float*/, y/*float*/, z/*float*/)\r\n{\r\n    this.accelX = x;\r\n    this.accelY = y;\r\n    this.accelZ = z;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # setDrag()\r\n//============================================================\r\nL2DBaseModel.prototype.setDrag         = function(x/*float*/, y/*float*/)\r\n{\r\n    this.dragX = x;\r\n    this.dragY = y;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # getMainMotionManager()\r\n//============================================================\r\nL2DBaseModel.prototype.getMainMotionManager = function()\r\n{\r\n    return this.mainMotionManager;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # getExpressionManager()\r\n//============================================================\r\nL2DBaseModel.prototype.getExpressionManager = function()\r\n{\r\n    return this.expressionManager;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # loadModelData()\r\n//============================================================\r\nL2DBaseModel.prototype.loadModelData   = function(path/*String*/, callback)\r\n{\r\n    /*\r\n    if( this.live2DModel != null ) {\r\n        this.live2DModel.deleteTextures();\r\n    }\r\n    */\r\n    // var pm = Live2DFramework.getPlatformManager(); //IPlatformManager\r\n    if( this.debugMode ) console.log(\"Load model : \" + path);\r\n\r\n    var thisRef = this;\r\n    loadBytes(path, 'arraybuffer', function(buf) {\r\n        thisRef.live2DModel = Live2DModelWebGL.loadModel(buf);\r\n        thisRef.live2DModel.saveParam();\r\n\r\n        var _err = Live2D.getError();\r\n\r\n        if( _err != 0 ) {\r\n            console.error(\"Error : Failed to loadModelData().\");\r\n            return;\r\n        }\r\n\r\n        thisRef.modelMatrix = new L2DModelMatrix(\r\n            thisRef.live2DModel.getCanvasWidth(),\r\n            thisRef.live2DModel.getCanvasHeight()); //L2DModelMatrix\r\n        thisRef.modelMatrix.setWidth(2);\r\n        thisRef.modelMatrix.setCenterPosition(0, 0);\r\n\r\n        callback(thisRef.live2DModel);\r\n    });\r\n}\r\n\r\n\r\n//============================================================\r\n//    L2DBaseModel # loadTexture()\r\n//============================================================\r\nL2DBaseModel.prototype.loadTexture     = function(gl, no/*int*/, path/*String*/, callback)\r\n{\r\n    texCounter++;\r\n\r\n    // var pm = Live2DFramework.getPlatformManager(); //IPlatformManager\r\n\r\n    if( this.debugMode ) console.log(\"Load Texture : \" + path);\r\n\r\n    var thisRef = this;\r\n    this._loadTexture(gl, this.live2DModel , no , path, function(){\r\n        texCounter--;\r\n        if(texCounter == 0) thisRef.isTexLoaded = true;\r\n        if (typeof callback == \"function\") callback();\r\n    });\r\n\r\n}\r\n\r\nL2DBaseModel.prototype._loadTexture = function(gl, model, no, path, callback) {\r\n// load textures\r\nvar loadedImage = new Image();\r\nloadedImage.src = path;\r\n\r\nvar thisRef = this;\r\nloadedImage.onload = () => {\r\n\r\n    // create texture\r\n   //  var canvas = document.getElementById(\"glcanvas\");\r\n    // var gl = getWebGLContext(canvas, {premultipliedAlpha : true});\r\n    var texture = gl.createTexture();\r\n    if (!texture){ console.error(\"Failed to generate gl texture name.\"); return -1; }\r\n\r\n    if(model.isPremultipliedAlpha() == false){\r\n        // 乗算済アルファテクスチャ以外の場合\r\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);\r\n    }\r\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 1);\r\n    gl.activeTexture(gl.TEXTURE0);\r\n    gl.bindTexture(gl.TEXTURE_2D, texture);\r\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA,\r\n                  gl.UNSIGNED_BYTE, loadedImage);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\r\n    gl.generateMipmap(gl.TEXTURE_2D);\r\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 0);\r\n\r\n    model.setTexture(no, texture);\r\n\r\n    if (typeof callback == \"function\") callback();\r\n};\r\n\r\nloadedImage.onerror = function() {\r\n    console.error(\"Failed to load image : \" + path);\r\n}\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # loadMotion()\r\n//============================================================\r\nL2DBaseModel.prototype.loadMotion      = function(name/*String*/, path /*String*/, callback)\r\n{\r\n    // var pm = Live2DFramework.getPlatformManager(); //IPlatformManager\r\n\r\n    if(this.debugMode) console.log(\"Load Motion : \" + path);\r\n\r\n    var motion = null; //Live2DMotion\r\n\r\n    var thisRef = this;\r\n    loadBytes(path, 'arraybuffer', function(buf) {\r\n        motion = Live2DMotion.loadMotion(buf);\r\n        if( name != null ) {\r\n            thisRef.motions[name] = motion;\r\n        }\r\n        callback(motion);\r\n    });\r\n\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # loadExpression()\r\n//============================================================\r\nL2DBaseModel.prototype.loadExpression  = function(name/*String*/, path /*String*/, callback)\r\n{\r\n    // var pm = Live2DFramework.getPlatformManager(); //IPlatformManager\r\n\r\n    if( this.debugMode ) console.log(\"Load Expression : \" + path);\r\n\r\n    var thisRef = this;\r\n    loadBytes(path, 'json', function(json) {\r\n        if(name != null) {\r\n            thisRef.expressions[name] = L2DExpressionMotion.loadJson(json);\r\n        }\r\n        if (typeof callback == \"function\") callback();\r\n    });\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # loadPose()\r\n//============================================================\r\nL2DBaseModel.prototype.loadPose = function( path /*String*/, callback )\r\n{\r\n    // var pm = Live2DFramework.getPlatformManager(); //IPlatformManager\r\n    if( this.debugMode ) console.log(\"Load Pose : \" + path);\r\n    var thisRef = this;\r\n    try {\r\n        loadBytes(path, 'json', function(json) {\r\n            thisRef.pose = L2DPose.load(json);\r\n            if (typeof callback == \"function\") callback();\r\n        });\r\n    }\r\n    catch(e) {\r\n        console.warn(e);\r\n    }\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # loadPhysics()\r\n//============================================================\r\nL2DBaseModel.prototype.loadPhysics     = function(path/*String*/)\r\n{\r\n    // var pm = Live2DFramework.getPlatformManager(); //IPlatformManager\r\n    if( this.debugMode ) console.log(\"Load Physics : \" + path);\r\n    var thisRef = this;\r\n    try {\r\n        loadBytes(path, 'json', function(json) {\r\n            thisRef.physics = L2DPhysics.load(json);\r\n        });\r\n    }\r\n    catch(e){\r\n        console.warn(e);\r\n    }\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # hitTestSimple()\r\n//============================================================\r\nL2DBaseModel.prototype.hitTestSimple = function(drawID, testX, testY)\r\n{\r\n    var drawIndex = this.live2DModel.getDrawDataIndex(drawID);\r\n\r\n    if( drawIndex < 0 ) return false;\r\n\r\n    var points = this.live2DModel.getTransformedPoints(drawIndex);\r\n    var left = this.live2DModel.getCanvasWidth();\r\n    var right = 0;\r\n    var top = this.live2DModel.getCanvasHeight();\r\n    var bottom = 0;\r\n\r\n    for( var j = 0; j < points.length; j = j + 2 ) {\r\n        var x = points[j];\r\n        var y = points[j + 1];\r\n\r\n        if( x < left ) left = x;\r\n        if( x > right ) right = x;\r\n        if( y < top ) top = y;\r\n        if( y > bottom ) bottom = y;\r\n    }\r\n    var tx = this.modelMatrix.invertTransformX(testX);\r\n    var ty = this.modelMatrix.invertTransformY(testY);\r\n   //  console.log(left << 0, right << 0, tx << 0)\r\n   //  console.log(bottom << 0, top << 0, ty << 0)\r\n    return ( left <= tx && tx <= right && top <= ty && ty <= bottom );\r\n}\r\n\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DExpressionMotion  extends     AMotion\r\n//============================================================\r\n//============================================================\r\nexport function L2DExpressionMotion()\r\n{\r\n    AMotion.prototype.constructor.call(this);\r\n    this.paramList = new Array(); //ArrayList<L2DExpressionParam>\r\n}\r\n\r\nL2DExpressionMotion.prototype = new AMotion(); // L2DExpressionMotion extends AMotion\r\n\r\n//============================================================\r\nL2DExpressionMotion.EXPRESSION_DEFAULT  = \"DEFAULT\";\r\nL2DExpressionMotion.TYPE_SET            = 0;\r\nL2DExpressionMotion.TYPE_ADD            = 1;\r\nL2DExpressionMotion.TYPE_MULT           = 2;\r\n\r\n//============================================================\r\n//    static L2DExpressionMotion.loadJson()\r\n//============================================================\r\nL2DExpressionMotion.loadJson        = function(json)\r\n{\r\n    var ret = new L2DExpressionMotion();\r\n\r\n    // var pm = Live2DFramework.getPlatformManager();\r\n   //  var json = jsonParseFromBytes(buf);\r\n\r\n    ret.setFadeIn(parseInt(json.fade_in) > 0 ? parseInt(json.fade_in) : 1000);\r\n    ret.setFadeOut(parseInt(json.fade_out) > 0 ? parseInt(json.fade_out) : 1000);\r\n\r\n    if(json.params == null) {\r\n        return ret;\r\n    }\r\n\r\n    var params = json.params;\r\n    var paramNum = params.length;\r\n    ret.paramList = []; //ArrayList<L2DExpressionParam>\r\n    for( var i = 0; i < paramNum; i++) {\r\n        var param = params[i];\r\n        var paramID = param.id.toString();\r\n        var value = parseFloat(param.val);\r\n        var calcTypeInt = L2DExpressionMotion.TYPE_ADD;\r\n        var calc = param.calc != null ? param.calc.toString() : \"add\";\r\n        if(calc === \"add\") {\r\n            calcTypeInt = L2DExpressionMotion.TYPE_ADD;\r\n        }\r\n        else if(calc === \"mult\") {\r\n            calcTypeInt = L2DExpressionMotion.TYPE_MULT;\r\n        }\r\n        else if(calc === \"set\") {\r\n            calcTypeInt = L2DExpressionMotion.TYPE_SET;\r\n        }\r\n        else {\r\n            calcTypeInt = L2DExpressionMotion.TYPE_ADD;\r\n        }\r\n        if(calcTypeInt == L2DExpressionMotion.TYPE_ADD) {\r\n            var defaultValue = param.def == null ? 0 : parseFloat(param.def);\r\n            value = value - defaultValue;\r\n        }\r\n        else if(calcTypeInt == L2DExpressionMotion.TYPE_MULT) {\r\n            var defaultValue = param.def == null ? 1 : parseFloat(param.def);\r\n            if(defaultValue == 0 ) defaultValue = 1;\r\n            value = value / defaultValue;\r\n        }\r\n\r\n        var item = new L2DExpressionParam(  );\r\n        item.id = paramID;\r\n        item.type = calcTypeInt;\r\n        item.value = value;\r\n\r\n        ret.paramList.push(item);\r\n    }\r\n\r\n     return ret;\r\n}\r\n\r\n\r\n//============================================================\r\n//    L2DExpressionMotion # updateParamExe()\r\n//============================================================\r\nL2DExpressionMotion.prototype.updateParamExe  = function(model /*ALive2DModel*/, timeMSec/*long*/ ,weight /*float*/ ,motionQueueEnt /*MotionQueueEnt*/)\r\n{\r\n    for(var i = this.paramList.length - 1; i >= 0; --i) {\r\n        var param = this.paramList[i]; //L2DExpressionParam\r\n        // if (!param || !param.type) continue;\r\n        if(param.type == L2DExpressionMotion.TYPE_ADD) {\r\n            model.addToParamFloat(param.id, param.value, weight);\r\n        }\r\n        else if(param.type == L2DExpressionMotion.TYPE_MULT) {\r\n            model.multParamFloat(param.id, param.value, weight);\r\n        }\r\n        else if(param.type == L2DExpressionMotion.TYPE_SET) {\r\n            model.setParamFloat(param.id, param.value, weight);\r\n        }\r\n    }\r\n}\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DExpressionParam\r\n//============================================================\r\n//============================================================\r\nexport function L2DExpressionParam()\r\n{\r\n    this.id              = \"\";\r\n    this.type            = -1;\r\n    this.value           = null;\r\n}\r\n\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DEyeBlink\r\n//============================================================\r\n//============================================================\r\nexport function L2DEyeBlink()\r\n{\r\n    this.nextBlinkTime   = null /* TODO NOT INIT */; //\r\n    this.stateStartTime  = null /* TODO NOT INIT */; //\r\n    this.blinkIntervalMsec = null /* TODO NOT INIT */; //\r\n    this.eyeState = EYE_STATE.STATE_FIRST;\r\n    this.blinkIntervalMsec = 4000;\r\n    this.closingMotionMsec = 100;\r\n    this.closedMotionMsec = 50;\r\n    this.openingMotionMsec = 150;\r\n    this.closeIfZero = true;\r\n    this.eyeID_L = \"PARAM_EYE_L_OPEN\";\r\n    this.eyeID_R = \"PARAM_EYE_R_OPEN\";\r\n}\r\n\r\n//============================================================\r\n//    L2DEyeBlink # calcNextBlink()\r\n//============================================================\r\nL2DEyeBlink.prototype.calcNextBlink   = function()\r\n{\r\n    var time /*long*/ = UtSystem.getUserTimeMSec();\r\n    var r /*Number*/ = Math.random();\r\n    return  /*(long)*/ (time + r * (2 * this.blinkIntervalMsec - 1));\r\n}\r\n\r\n//============================================================\r\n//    L2DEyeBlink # setInterval()\r\n//============================================================\r\nL2DEyeBlink.prototype.setInterval     = function(blinkIntervalMsec /*int*/)\r\n{\r\n    this.blinkIntervalMsec = blinkIntervalMsec;\r\n}\r\n\r\n//============================================================\r\n//    L2DEyeBlink # setEyeMotion()\r\n//============================================================\r\nL2DEyeBlink.prototype.setEyeMotion    = function(closingMotionMsec/*int*/ , closedMotionMsec/*int*/ , openingMotionMsec/*int*/)\r\n{\r\n    this.closingMotionMsec = closingMotionMsec;\r\n    this.closedMotionMsec = closedMotionMsec;\r\n    this.openingMotionMsec = openingMotionMsec;\r\n}\r\n\r\n//============================================================\r\n//    L2DEyeBlink # updateParam()\r\n//============================================================\r\nL2DEyeBlink.prototype.updateParam     = function(model/*ALive2DModel*/)\r\n{\r\n    var time /*:long*/ = UtSystem.getUserTimeMSec();\r\n    var eyeParamValue /*:Number*/;\r\n    var t /*:Number*/ = 0;\r\n    switch(this.eyeState){\r\n    case EYE_STATE.STATE_CLOSING:\r\n        t = (time - this.stateStartTime) / this.closingMotionMsec;\r\n        if(t >= 1) {\r\n            t = 1;\r\n            this.eyeState = EYE_STATE.STATE_CLOSED;\r\n            this.stateStartTime = time;\r\n        }\r\n        eyeParamValue = 1 - t;\r\n        break;\r\n    case EYE_STATE.STATE_CLOSED:\r\n        t = (time - this.stateStartTime) / this.closedMotionMsec;\r\n        if(t >= 1) {\r\n            this.eyeState = EYE_STATE.STATE_OPENING;\r\n            this.stateStartTime = time;\r\n        }\r\n        eyeParamValue = 0;\r\n        break;\r\n    case EYE_STATE.STATE_OPENING:\r\n        t = (time - this.stateStartTime) / this.openingMotionMsec;\r\n        if(t >= 1) {\r\n            t = 1;\r\n            this.eyeState = EYE_STATE.STATE_INTERVAL;\r\n            this.nextBlinkTime = this.calcNextBlink();\r\n        }\r\n        eyeParamValue = t;\r\n        break;\r\n    case EYE_STATE.STATE_INTERVAL:\r\n        if(this.nextBlinkTime < time) {\r\n            this.eyeState = EYE_STATE.STATE_CLOSING;\r\n            this.stateStartTime = time;\r\n        }\r\n        eyeParamValue = 1;\r\n        break;\r\n    case EYE_STATE.STATE_FIRST:\r\n    default:\r\n        this.eyeState = EYE_STATE.STATE_INTERVAL;\r\n        this.nextBlinkTime = this.calcNextBlink();\r\n        eyeParamValue = 1;\r\n        break;\r\n    }\r\n    if(!this.closeIfZero) eyeParamValue = -eyeParamValue;\r\n    model.setParamFloat(this.eyeID_L , eyeParamValue);\r\n    model.setParamFloat(this.eyeID_R , eyeParamValue);\r\n}\r\n\r\n//== enum EYE_STATE ==\r\nvar EYE_STATE = function(){};\r\n\r\nEYE_STATE.STATE_FIRST          = \"STATE_FIRST\"\r\nEYE_STATE.STATE_INTERVAL       = \"STATE_INTERVAL\"\r\nEYE_STATE.STATE_CLOSING        = \"STATE_CLOSING\"\r\nEYE_STATE.STATE_CLOSED         = \"STATE_CLOSED\"\r\nEYE_STATE.STATE_OPENING        = \"STATE_OPENING\"\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DMatrix44\r\n//============================================================\r\n//============================================================\r\nexport function L2DMatrix44()\r\n{\r\n    this.tr              = new Float32Array(16); //\r\n    this.identity();\r\n}\r\n\r\n//============================================================\r\n//    static L2DMatrix44.mul()\r\n//============================================================\r\nL2DMatrix44.mul             = function( a/*float[]*/, b/*float[]*/, dst/*float[]*/ )\r\n{\r\n    var c = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];\r\n    var n = 4;\r\n    var i, j, k;\r\n    for( i = 0; i < n; i++ ) {\r\n        for( j = 0; j < n; j++ ) {\r\n            for( k = 0; k < n; k++ ) {\r\n                c[i + j * 4] += a[i + k * 4] * b[k + j * 4];\r\n            }\r\n        }\r\n    }\r\n    for( i = 0; i < 16; i++ ) {\r\n        dst[i] = c[i];\r\n    }\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # identity()\r\n//============================================================\r\nL2DMatrix44.prototype.identity        = function()\r\n{\r\n    for( var i/*:int*/ = 0; i < 16; i++ )\r\n        this.tr[i] = ( ( i % 5 ) == 0 ) ? 1 : 0;\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # getArray()\r\n//============================================================\r\nL2DMatrix44.prototype.getArray        = function()\r\n{\r\n    return this.tr;\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # getCopyMatrix()\r\n//============================================================\r\nL2DMatrix44.prototype.getCopyMatrix   = function()\r\n{\r\n    return new Float32Array(this.tr); // this.tr.clone();\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # setMatrix()\r\n//============================================================\r\nL2DMatrix44.prototype.setMatrix       = function( tr/*float[]*/ )\r\n{\r\n    if( this.tr == null || this.tr.length != this.tr.length ) return ;\r\n    for( var i/*:int*/ = 0; i < 16; i++ ) this.tr[i] = tr[i];\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # getScaleX()\r\n//============================================================\r\nL2DMatrix44.prototype.getScaleX       = function()\r\n{\r\n    return this.tr[0];\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # getScaleY()\r\n//============================================================\r\nL2DMatrix44.prototype.getScaleY       = function()\r\n{\r\n    return this.tr[5];\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # transformX()\r\n//============================================================\r\nL2DMatrix44.prototype.transformX      = function( src/*float*/ )\r\n{\r\n    return this.tr[0] * src + this.tr[12];\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # transformY()\r\n//============================================================\r\nL2DMatrix44.prototype.transformY      = function( src/*float*/ )\r\n{\r\n    return this.tr[5] * src + this.tr[13];\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # invertTransformX()\r\n//============================================================\r\nL2DMatrix44.prototype.invertTransformX = function( src/*float*/ )\r\n{\r\n    return ( src - this.tr[12] ) / this.tr[0];\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # invertTransformY()\r\n//============================================================\r\nL2DMatrix44.prototype.invertTransformY = function( src/*float*/ )\r\n{\r\n    return ( src - this.tr[13] ) / this.tr[5];\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # multTranslate()\r\n//============================================================\r\nL2DMatrix44.prototype.multTranslate   = function( shiftX/*float*/, shiftY/*float*/ )\r\n{\r\n    var tr1 = [ 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, shiftX, shiftY, 0, 1 ];\r\n    L2DMatrix44.mul(tr1, this.tr, this.tr);\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # translate()\r\n//============================================================\r\nL2DMatrix44.prototype.translate       = function( x/*float*/, y/*float*/ )\r\n{\r\n    this.tr[12] = x;\r\n    this.tr[13] = y;\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # translateX()\r\n//============================================================\r\nL2DMatrix44.prototype.translateX      = function( x/*float*/ )\r\n{\r\n    this.tr[12] = x;\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # translateY()\r\n//============================================================\r\nL2DMatrix44.prototype.translateY      = function( y/*float*/ )\r\n{\r\n    this.tr[13] = y;\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # multScale()\r\n//============================================================\r\nL2DMatrix44.prototype.multScale       = function( scaleX/*float*/, scaleY/*float*/ )\r\n{\r\n    var tr1 = [scaleX, 0, 0, 0, 0, scaleY, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\r\n    L2DMatrix44.mul(tr1, this.tr, this.tr);\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # scale()\r\n//============================================================\r\nL2DMatrix44.prototype.scale           = function( scaleX/*float*/, scaleY/*float*/ )\r\n{\r\n    this.tr[0] = scaleX;\r\n    this.tr[5] = scaleY;\r\n}\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DModelMatrix       extends     L2DMatrix44\r\n//============================================================\r\n//============================================================\r\nexport function L2DModelMatrix(w/*float*/, h/*float*/){\r\n    L2DMatrix44.prototype.constructor.call(this);\r\n    this.width = w;\r\n    this.height = h;\r\n}\r\n\r\n//L2DModelMatrix extends L2DMatrix44\r\nL2DModelMatrix.prototype = new L2DMatrix44();\r\n\r\n//============================================================\r\n//    L2DModelMatrix # setPosition()\r\n//============================================================\r\nL2DModelMatrix.prototype.setPosition     = function(x/*float*/, y/*float*/)\r\n{\r\n    this.translate(x, y);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # setCenterPosition()\r\n//============================================================\r\nL2DModelMatrix.prototype.setCenterPosition = function(x/*float*/, y/*float*/)\r\n{\r\n    var w = this.width * this.getScaleX();\r\n    var h = this.height * this.getScaleY();\r\n    this.translate(x - w / 2, y - h / 2);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # top()\r\n//============================================================\r\nL2DModelMatrix.prototype.top             = function(y/*float*/)\r\n{\r\n    this.setY(y);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # bottom()\r\n//============================================================\r\nL2DModelMatrix.prototype.bottom          = function(y/*float*/)\r\n{\r\n    var h = this.height * this.getScaleY();\r\n    this.translateY(y - h);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # left()\r\n//============================================================\r\nL2DModelMatrix.prototype.left            = function(x/*float*/)\r\n{\r\n    this.setX(x);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # right()\r\n//============================================================\r\nL2DModelMatrix.prototype.right           = function(x/*float*/)\r\n{\r\n    var w = this.width * this.getScaleX();\r\n    this.translateX(x - w);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # centerX()\r\n//============================================================\r\nL2DModelMatrix.prototype.centerX         = function(x/*float*/)\r\n{\r\n    var w = this.width * this.getScaleX();\r\n    this.translateX(x - w / 2);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # centerY()\r\n//============================================================\r\nL2DModelMatrix.prototype.centerY         = function(y/*float*/)\r\n{\r\n    var h = this.height * this.getScaleY();\r\n    this.translateY(y - h / 2);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # setX()\r\n//============================================================\r\nL2DModelMatrix.prototype.setX            = function(x/*float*/)\r\n{\r\n    this.translateX(x);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # setY()\r\n//============================================================\r\nL2DModelMatrix.prototype.setY            = function(y/*float*/)\r\n{\r\n    this.translateY(y);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # setHeight()\r\n//============================================================\r\nL2DModelMatrix.prototype.setHeight       = function(h/*float*/)\r\n{\r\n    var scaleX = h / this.height;\r\n    var scaleY = -scaleX;\r\n    this.scale(scaleX, scaleY);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # setWidth()\r\n//============================================================\r\nL2DModelMatrix.prototype.setWidth        = function(w/*float*/)\r\n{\r\n    var scaleX = w / this.width;\r\n    var scaleY = -scaleX;\r\n    this.scale(scaleX, scaleY);\r\n}\r\n\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DMotionManager     extends     MotionQueueManager\r\n//============================================================\r\n//============================================================\r\nexport function L2DMotionManager()\r\n{\r\n    MotionQueueManager.prototype.constructor.call(this);\r\n    this.currentPriority = null;\r\n    this.reservePriority = null;\r\n\r\n    this.super = MotionQueueManager.prototype;\r\n}\r\n\r\n\r\nL2DMotionManager.prototype = new MotionQueueManager();\r\n\r\n//============================================================\r\n//    L2DMotionManager # getCurrentPriority()\r\n//============================================================\r\nL2DMotionManager.prototype.getCurrentPriority = function()\r\n{\r\n    return this.currentPriority;\r\n}\r\n\r\n//============================================================\r\n//    L2DMotionManager # getReservePriority()\r\n//============================================================\r\nL2DMotionManager.prototype.getReservePriority = function()\r\n{\r\n    return this.reservePriority;\r\n}\r\n\r\n//============================================================\r\n//    L2DMotionManager # reserveMotion()\r\n//============================================================\r\nL2DMotionManager.prototype.reserveMotion   = function(priority/*int*/)\r\n{\r\n    if(this.reservePriority >= priority) {\r\n        return false;\r\n    }\r\n    if(this.currentPriority >= priority) {\r\n        return false;\r\n    }\r\n\r\n    this.reservePriority = priority;\r\n\r\n    return true;\r\n}\r\n\r\n//============================================================\r\n//    L2DMotionManager # setReservePriority()\r\n//============================================================\r\nL2DMotionManager.prototype.setReservePriority = function(val/*int*/)\r\n{\r\n    this.reservePriority = val;\r\n}\r\n\r\n//============================================================\r\n//    L2DMotionManager # updateParam()\r\n//============================================================\r\nL2DMotionManager.prototype.updateParam     = function(model/*ALive2DModel*/)\r\n{\r\n    var updated = MotionQueueManager.prototype.updateParam.call(this, model);\r\n\r\n    if(this.isFinished()) {\r\n        this.currentPriority = 0;\r\n    }\r\n\r\n    return updated;\r\n}\r\n\r\n//============================================================\r\n//    L2DMotionManager # startMotionPrio()\r\n//============================================================\r\nL2DMotionManager.prototype.startMotionPrio = function(motion/*AMotion*/, priority/*int*/)\r\n{\r\n    if(priority == this.reservePriority) {\r\n        this.reservePriority = 0;\r\n    }\r\n    this.currentPriority = priority;\r\n    return this.startMotion(motion, false);\r\n}\r\n\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DPhysics\r\n//============================================================\r\n//============================================================\r\nexport function L2DPhysics()\r\n{\r\n    this.physicsList = new Array(); //ArrayList<PhysicsHair>\r\n    this.startTimeMSec = UtSystem.getUserTimeMSec();\r\n}\r\n\r\n//============================================================\r\n//    static L2DPhysics.load()\r\n//============================================================\r\nL2DPhysics.load            = function(json)\r\n{\r\n    var ret = new L2DPhysics(); //L2DPhysicsL2DPhysics\r\n    // var pm = Live2DFramework.getPlatformManager();\r\n   //  var json = jsonParseFromBytes(buf);\r\n    var params = json.physics_hair;\r\n    var paramNum = params.length;\r\n    for(var i = 0; i < paramNum; i++) {\r\n        var param = params[i]; //Value\r\n        var physics = new PhysicsHair(); //PhysicsHairPhysicsHair\r\n        var setup = param.setup; //Value\r\n        var length = parseFloat(setup.length);\r\n        var resist = parseFloat(setup.regist);\r\n        var mass = parseFloat(setup.mass);\r\n        physics.setup(length, resist, mass);\r\n        var srcList = param.src; //Value\r\n        var srcNum = srcList.length;\r\n        for(var j = 0; j < srcNum; j++) {\r\n            var src = srcList[j]; //Value\r\n            var id = src.id; //String\r\n            var type = PhysicsHair.Src.SRC_TO_X;\r\n            var typeStr = src.ptype; //String\r\n            if(typeStr === \"x\") {\r\n                type = PhysicsHair.Src.SRC_TO_X;\r\n            }\r\n            else if(typeStr === \"y\") {\r\n                type = PhysicsHair.Src.SRC_TO_Y;\r\n            }\r\n            else if(typeStr === \"angle\") {\r\n                type = PhysicsHair.Src.SRC_TO_G_ANGLE;\r\n            }\r\n            else {\r\n                UtDebug.error(\"live2d\", \"Invalid parameter:PhysicsHair.Src\");\r\n            }\r\n            var scale = parseFloat(src.scale);\r\n            var weight = parseFloat(src.weight);\r\n            physics.addSrcParam(type, id, scale, weight);\r\n        }\r\n        var targetList = param.targets; //Value\r\n        var targetNum = targetList.length;\r\n        for(var j = 0; j < targetNum; j++) {\r\n            var target = targetList[j]; //Value\r\n            var id = target.id; //String\r\n            var type = PhysicsHair.Target.TARGET_FROM_ANGLE;\r\n            var typeStr = target.ptype; //String\r\n            if(typeStr === \"angle\") {\r\n                type = PhysicsHair.Target.TARGET_FROM_ANGLE;\r\n            }\r\n            else if(typeStr === \"angle_v\") {\r\n                type = PhysicsHair.Target.TARGET_FROM_ANGLE_V;\r\n            }\r\n            else {\r\n                UtDebug.error(\"live2d\", \"Invalid parameter:PhysicsHair.Target\");\r\n            }\r\n            var scale = parseFloat(target.scale);\r\n            var weight = parseFloat(target.weight);\r\n            physics.addTargetParam(type, id, scale, weight);\r\n        }\r\n        ret.physicsList.push(physics);\r\n    }\r\n    return ret;\r\n}\r\n\r\n//============================================================\r\n//    L2DPhysics # updateParam()\r\n//============================================================\r\nL2DPhysics.prototype.updateParam     = function(model/*ALive2DModel*/)\r\n{\r\n    var timeMSec = UtSystem.getUserTimeMSec() - this.startTimeMSec;\r\n    for(var i = 0; i < this.physicsList.length; i++) {\r\n        this.physicsList[i].update(model, timeMSec);\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DPose\r\n//============================================================\r\n//============================================================\r\nexport function L2DPose()\r\n{\r\n    this.lastTime        = 0;\r\n    this.lastModel       = null; //ALive2DModel\r\n    this.partsGroups = new Array(); //ArrayList<L2DPartsParam[]>\r\n}\r\n\r\n\r\n//============================================================\r\n//    static L2DPose.load()\r\n//============================================================\r\nL2DPose.load            = function(json)\r\n{\r\n    var ret = new L2DPose(); //L2DPose\r\n    // var pm = Live2DFramework.getPlatformManager();\r\n   //  var json = jsonParseFromBytes(buf);\r\n    var poseListInfo = json.parts_visible; //Value\r\n    var poseNum = poseListInfo.length;\r\n    for(var i_pose = 0; i_pose < poseNum; i_pose++) {\r\n        var poseInfo = poseListInfo[i_pose]; //Value\r\n        var idListInfo = poseInfo.group; //Value\r\n        var idNum = idListInfo.length;\r\n        var partsGroup/*L2DPartsParam*/ = new Array();\r\n        for(var i_group = 0; i_group < idNum; i_group++) {\r\n            var partsInfo = idListInfo[i_group]; //Value\r\n            var parts = new L2DPartsParam(partsInfo.id); //L2DPartsParamL2DPartsParam\r\n            partsGroup[i_group] = parts;\r\n            if(partsInfo.link == null) continue;\r\n            var linkListInfo = partsInfo.link; //Value\r\n            var linkNum = linkListInfo.length;\r\n            parts.link = new Array(); //ArrayList<L2DPartsParam>\r\n            for(var i_link = 0; i_link < linkNum; i_link++) {\r\n                var linkParts = new L2DPartsParam(linkListInfo[i_link]); //L2DPartsParamL2DPartsParam\r\n                parts.link.push(linkParts);\r\n            }\r\n        }\r\n        ret.partsGroups.push(partsGroup);\r\n    }\r\n\r\n    return ret;\r\n}\r\n\r\n//============================================================\r\n//    L2DPose # updateParam()\r\n//============================================================\r\nL2DPose.prototype.updateParam     = function(model/*ALive2DModel*/)\r\n{\r\n    if(model == null) return ;\r\n\r\n    if(!(model == this.lastModel)) {\r\n        this.initParam(model);\r\n    }\r\n    this.lastModel = model;\r\n\r\n    var curTime = UtSystem.getUserTimeMSec();\r\n    var deltaTimeSec = ((this.lastTime == 0) ? 0 : (curTime - this.lastTime) / 1000.0);\r\n    this.lastTime = curTime;\r\n    if(deltaTimeSec < 0) deltaTimeSec = 0;\r\n    for(var i = 0; i < this.partsGroups.length; i++) {\r\n        this.normalizePartsOpacityGroup(model, this.partsGroups[i], deltaTimeSec);\r\n        this.copyOpacityOtherParts(model, this.partsGroups[i]);\r\n    }\r\n}\r\n\r\n//============================================================\r\n//    L2DPose # initParam()\r\n//============================================================\r\nL2DPose.prototype.initParam       = function(model/*ALive2DModel*/)\r\n{\r\n    if(model == null) return ;\r\n    for(var i = 0; i < this.partsGroups.length; i++) {\r\n        var partsGroup = this.partsGroups[i]; //L2DPartsParam\r\n        for(var j = 0; j < partsGroup.length; j++) {\r\n            partsGroup[j].initIndex(model);\r\n            var partsIndex = partsGroup[j].partsIndex;\r\n            var paramIndex = partsGroup[j].paramIndex;\r\n            if(partsIndex < 0) continue;\r\n            var v/*:Boolean*/ = (model.getParamFloat(paramIndex) != 0);\r\n            model.setPartsOpacity(partsIndex, (v ? 1.0 : 0.0));\r\n            model.setParamFloat(paramIndex, (v ? 1.0 : 0.0));\r\n            if(partsGroup[j].link == null) continue;\r\n            for(var k = 0; k < partsGroup[j].link.length; k++) {\r\n                partsGroup[j].link[k].initIndex(model);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n//============================================================\r\n//    L2DPose # normalizePartsOpacityGroup()\r\n//============================================================\r\nL2DPose.prototype.normalizePartsOpacityGroup = function(model/*ALive2DModel*/, partsGroup/*L2DPartsParam[]*/, deltaTimeSec/*float*/)\r\n{\r\n    var visibleParts = -1;\r\n    var visibleOpacity = 1.0;\r\n    var CLEAR_TIME_SEC = 0.5;\r\n    var phi = 0.5;\r\n    var maxBackOpacity = 0.15;\r\n    for(var i = 0; i < partsGroup.length; i++) {\r\n        var partsIndex = partsGroup[i].partsIndex;\r\n        var paramIndex = partsGroup[i].paramIndex;\r\n        if(partsIndex < 0) continue;if(model.getParamFloat(paramIndex) != 0) {\r\n            if(visibleParts >= 0) {\r\n                break;\r\n            }\r\n            visibleParts = i;\r\n            visibleOpacity = model.getPartsOpacity(partsIndex);\r\n            visibleOpacity += deltaTimeSec / CLEAR_TIME_SEC;\r\n            if(visibleOpacity > 1) {\r\n                visibleOpacity = 1;\r\n            }\r\n        }\r\n    }\r\n    if(visibleParts < 0) {\r\n        visibleParts = 0;\r\n        visibleOpacity = 1;\r\n    }\r\n    for(var i = 0; i < partsGroup.length; i++) {\r\n        var partsIndex = partsGroup[i].partsIndex;\r\n        if(partsIndex < 0) continue;if(visibleParts == i) {\r\n            model.setPartsOpacity(partsIndex, visibleOpacity);\r\n        }\r\n        else {\r\n            var opacity = model.getPartsOpacity(partsIndex);\r\n            var a1;\r\n            if(visibleOpacity < phi) {\r\n                a1 = visibleOpacity * (phi - 1) / phi + 1;\r\n            }\r\n            else {\r\n                a1 = (1 - visibleOpacity) * phi / (1 - phi);\r\n            }\r\n            var backOp = (1 - a1) * (1 - visibleOpacity);\r\n            if(backOp > maxBackOpacity) {\r\n                a1 = 1 - maxBackOpacity / (1 - visibleOpacity);\r\n            }\r\n            if(opacity > a1) {\r\n                opacity = a1;\r\n            }\r\n            model.setPartsOpacity(partsIndex, opacity);\r\n        }\r\n    }\r\n}\r\n\r\n//============================================================\r\n//    L2DPose # copyOpacityOtherParts()\r\n//============================================================\r\nL2DPose.prototype.copyOpacityOtherParts = function(model/*ALive2DModel*/, partsGroup/*L2DPartsParam[]*/)\r\n{\r\n    for(var i_group = 0; i_group < partsGroup.length; i_group++) {\r\n        var partsParam = partsGroup[i_group]; //L2DPartsParam\r\n        if(partsParam.link == null) continue;\r\n        if(partsParam.partsIndex < 0) continue;\r\n        var opacity = model.getPartsOpacity(partsParam.partsIndex);\r\n        for(var i_link = 0; i_link < partsParam.link.length; i_link++) {\r\n            var linkParts = partsParam.link[i_link]; //L2DPartsParam\r\n            if(linkParts.partsIndex < 0) continue;\r\n            model.setPartsOpacity(linkParts.partsIndex, opacity);\r\n        }\r\n    }\r\n}\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DPartsParam\r\n//============================================================\r\n//============================================================\r\nexport function L2DPartsParam(id/*String*/){\r\n    this.paramIndex      = -1;\r\n    this.partsIndex      = -1;\r\n    this.link            = null; // ArrayList<L2DPartsParam>\r\n    this.id = id;\r\n}\r\n\r\n//============================================================\r\n//    L2DPartsParam # initIndex()\r\n//============================================================\r\nL2DPartsParam.prototype.initIndex       = function(model/*ALive2DModel*/)\r\n{\r\n    this.paramIndex = model.getParamIndex(\"VISIBLE:\" + this.id);\r\n    this.partsIndex = model.getPartsDataIndex(PartsDataID.getID(this.id));\r\n    model.setParamFloat(this.paramIndex, 1);\r\n}\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DTargetPoint\r\n//============================================================\r\n//============================================================\r\nexport function L2DTargetPoint()\r\n{\r\n    this.EPSILON         = 0.01; // 変化の最小値（この値以下は無視される）\r\n    this.faceTargetX     = 0;\r\n    this.faceTargetY     = 0;\r\n    this.faceX           = 0;\r\n    this.faceY           = 0;\r\n    this.faceVX          = 0;\r\n    this.faceVY          = 0;\r\n    this.lastTimeSec     = 0;\r\n}\r\n\r\n//============================================================\r\nL2DTargetPoint.FRAME_RATE  = 30;\r\n\r\n//============================================================\r\n//    L2DTargetPoint # set()\r\n//============================================================\r\nL2DTargetPoint.prototype.setPoint = function(x/*float*/, y/*float*/)\r\n{\r\n    this.faceTargetX = x;\r\n    this.faceTargetY = y;\r\n}\r\n\r\n//============================================================\r\n//    L2DTargetPoint # getX()\r\n//============================================================\r\nL2DTargetPoint.prototype.getX            = function()\r\n{\r\n    return this.faceX;\r\n}\r\n\r\n//============================================================\r\n//    L2DTargetPoint # getY()\r\n//============================================================\r\nL2DTargetPoint.prototype.getY            = function()\r\n{\r\n    return this.faceY;\r\n}\r\n\r\n//============================================================\r\n//    L2DTargetPoint # update()\r\n//============================================================\r\nL2DTargetPoint.prototype.update          = function()\r\n{\r\n   var TIME_TO_MAX_SPEED = 0.15;\r\n   var FACE_PARAM_MAX_V = 40.0 / 7.5;\r\n   var MAX_V = FACE_PARAM_MAX_V / L2DTargetPoint.FRAME_RATE;\r\n    if(this.lastTimeSec == 0) {\r\n        this.lastTimeSec = UtSystem.getUserTimeMSec();\r\n        return;\r\n    }\r\n    var curTimeSec = UtSystem.getUserTimeMSec();\r\n    var deltaTimeWeight = (curTimeSec - this.lastTimeSec) * L2DTargetPoint.FRAME_RATE / 1000.0;\r\n    this.lastTimeSec = curTimeSec;\r\n   var FRAME_TO_MAX_SPEED = TIME_TO_MAX_SPEED * L2DTargetPoint.FRAME_RATE;\r\n   var MAX_A = deltaTimeWeight * MAX_V / FRAME_TO_MAX_SPEED;\r\n    var dx = (this.faceTargetX - this.faceX);\r\n    var dy = (this.faceTargetY - this.faceY);\r\n    // if(dx == 0 && dy == 0) return;\r\n    if( Math.abs(dx) <= this.EPSILON && Math.abs(dy) <= this.EPSILON ) return;\r\n    var d = Math.sqrt(dx * dx + dy * dy);\r\n    var vx = MAX_V * dx / d;\r\n    var vy = MAX_V * dy / d;\r\n    var ax = vx - this.faceVX;\r\n    var ay = vy - this.faceVY;\r\n    var a =  Math.sqrt(ax * ax + ay * ay);\r\n    if(a < -MAX_A || a > MAX_A) {\r\n        ax *= MAX_A / a;\r\n        ay *= MAX_A / a;\r\n        a = MAX_A;\r\n    }\r\n    this.faceVX += ax;\r\n    this.faceVY += ay;\r\n    {\r\n        var max_v = 0.5 * ( Math.sqrt(MAX_A * MAX_A + 16 * MAX_A * d - 8 * MAX_A * d) - MAX_A);\r\n        var cur_v =  Math.sqrt(this.faceVX * this.faceVX + this.faceVY * this.faceVY);\r\n        if(cur_v > max_v) {\r\n            this.faceVX *= max_v / cur_v;\r\n            this.faceVY *= max_v / cur_v;\r\n        }\r\n    }\r\n    this.faceX += this.faceVX;\r\n    this.faceY += this.faceVY;\r\n}\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DViewMatrix        extends     L2DMatrix44\r\n//============================================================\r\n//============================================================\r\nexport function L2DViewMatrix()\r\n{\r\n    L2DMatrix44.prototype.constructor.call(this);\r\n    this.screenLeft      = null;\r\n    this.screenRight     = null;\r\n    this.screenTop       = null;\r\n    this.screenBottom    = null;\r\n    this.maxLeft         = null;\r\n    this.maxRight        = null;\r\n    this.maxTop          = null;\r\n    this.maxBottom       = null;\r\n    this.max = Number.MAX_VALUE;\r\n    this.min = 0;\r\n}\r\n\r\nL2DViewMatrix.prototype = new L2DMatrix44(); //L2DViewMatrix extends L2DMatrix44\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getMaxScale()\r\n//============================================================\r\nL2DViewMatrix.prototype.getMaxScale     = function()\r\n{\r\n    return this.max;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getMinScale()\r\n//============================================================\r\nL2DViewMatrix.prototype.getMinScale     = function()\r\n{\r\n    return this.min;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # setMaxScale()\r\n//============================================================\r\nL2DViewMatrix.prototype.setMaxScale     = function(v/*float*/)\r\n{\r\n    this.max = v;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # setMinScale()\r\n//============================================================\r\nL2DViewMatrix.prototype.setMinScale     = function(v/*float*/)\r\n{\r\n    this.min = v;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # isMaxScale()\r\n//============================================================\r\nL2DViewMatrix.prototype.isMaxScale      = function()\r\n{\r\n    return this.getScaleX() == this.max;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # isMinScale()\r\n//============================================================\r\nL2DViewMatrix.prototype.isMinScale      = function()\r\n{\r\n    return this.getScaleX() == this.min;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # adjustTranslate()\r\n//============================================================\r\nL2DViewMatrix.prototype.adjustTranslate = function(shiftX/*float*/, shiftY/*float*/)\r\n{\r\n   // comment them, for don't know their function\r\n   //\r\n   //  if(this.tr[0] * this.maxLeft + (this.tr[12] + shiftX) > this.screenLeft)\r\n   //      shiftX = this.screenLeft - this.tr[0] * this.maxLeft - this.tr[12];\r\n   //  if(this.tr[0] * this.maxRight + (this.tr[12] + shiftX) < this.screenRight)\r\n   //      shiftX = this.screenRight - this.tr[0] * this.maxRight - this.tr[12];\r\n   //  if(this.tr[5] * this.maxTop + (this.tr[13] + shiftY) < this.screenTop)\r\n   //      shiftY = this.screenTop - this.tr[5] * this.maxTop - this.tr[13];\r\n   //  if(this.tr[5] * this.maxBottom + (this.tr[13] + shiftY) > this.screenBottom)\r\n   //      shiftY = this.screenBottom - this.tr[5] * this.maxBottom - this.tr[13];\r\n\r\n    var tr1 = [1, 0, 0, 0,\r\n               0, 1, 0, 0,\r\n               0, 0, 1, 0,\r\n               shiftX, shiftY, 0, 1 ];\r\n    L2DMatrix44.mul(tr1, this.tr, this.tr);\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # adjustScale()\r\n//============================================================\r\nL2DViewMatrix.prototype.adjustScale     = function(cx/*float*/, cy/*float*/, scaleX/*float*/, scaleY)\r\n{\r\n    if (!scaleY) {\r\n        scaleY = scaleX;\r\n    }\r\n   //  var targetScaleX = scaleX * this.tr[0];\r\n   //  if(targetScaleX < this.min) {\r\n   //      if(this.tr[0] > 0) scaleX = this.min / this.tr[0];\r\n   //  }\r\n   //  else if(targetScaleX > this.max) {\r\n   //      if(this.tr[0] > 0) scaleX = this.max / this.tr[0];\r\n   //  }\r\n   //  var targetScaleY = scaleY * this.tr[0];\r\n   //  if(targetScaleY < this.min) {\r\n   //      if(this.tr[0] > 0) scaleY = this.min / this.tr[0];\r\n   //  }\r\n   //  else if(targetScaleY > this.max) {\r\n   //      if(this.tr[0] > 0) scaleY = this.max / this.tr[0];\r\n   //  }\r\n    var tr1 = [1, 0, 0, 0,\r\n               0, 1, 0, 0,\r\n               0, 0, 1, 0,\r\n               cx, cy, 0, 1];\r\n    var tr2 = [scaleX, 0, 0, 0,\r\n               0, scaleY, 0, 0,\r\n               0, 0, 1, 0,\r\n               0, 0, 0, 1 ];\r\n    var tr3 = [1, 0, 0, 0,\r\n               0, 1, 0, 0,\r\n               0, 0, 1, 0,\r\n               -cx, -cy, 0, 1 ];\r\n    L2DMatrix44.mul(tr3, this.tr, this.tr);\r\n    L2DMatrix44.mul(tr2, this.tr, this.tr);\r\n    L2DMatrix44.mul(tr1, this.tr, this.tr);\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # setScreenRect()\r\n//============================================================\r\nL2DViewMatrix.prototype.setScreenRect   = function(left/*float*/, right/*float*/, bottom/*float*/, top/*float*/)\r\n{\r\n    this.screenLeft = left;\r\n    this.screenRight = right;\r\n    this.screenTop = top;\r\n    this.screenBottom = bottom;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # setMaxScreenRect()\r\n//============================================================\r\nL2DViewMatrix.prototype.setMaxScreenRect = function(left/*float*/, right/*float*/, bottom/*float*/, top/*float*/)\r\n{\r\n    this.maxLeft = left;\r\n    this.maxRight = right;\r\n    this.maxTop = top;\r\n    this.maxBottom = bottom;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getScreenLeft()\r\n//============================================================\r\nL2DViewMatrix.prototype.getScreenLeft   = function()\r\n{\r\n    return this.screenLeft;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getScreenRight()\r\n//============================================================\r\nL2DViewMatrix.prototype.getScreenRight  = function()\r\n{\r\n    return this.screenRight;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getScreenBottom()\r\n//============================================================\r\nL2DViewMatrix.prototype.getScreenBottom = function()\r\n{\r\n    return this.screenBottom;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getScreenTop()\r\n//============================================================\r\nL2DViewMatrix.prototype.getScreenTop    = function()\r\n{\r\n    return this.screenTop;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getMaxLeft()\r\n//============================================================\r\nL2DViewMatrix.prototype.getMaxLeft      = function()\r\n{\r\n    return this.maxLeft;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getMaxRight()\r\n//============================================================\r\nL2DViewMatrix.prototype.getMaxRight     = function()\r\n{\r\n    return this.maxRight;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getMaxBottom()\r\n//============================================================\r\nL2DViewMatrix.prototype.getMaxBottom    = function()\r\n{\r\n    return this.maxBottom;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getMaxTop()\r\n//============================================================\r\nL2DViewMatrix.prototype.getMaxTop       = function()\r\n{\r\n    return this.maxTop;\r\n}\r\n\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class Live2DFramework\r\n//============================================================\r\n//============================================================\r\n// export function Live2DFramework()\r\n// {\r\n// }\r\n//\r\n// //============================================================\r\n// Live2DFramework.platformManager  = null;\r\n//\r\n// //============================================================\r\n// //    static Live2DFramework.getPlatformManager()\r\n// //============================================================\r\n// Live2DFramework.getPlatformManager = function()\r\n// {\r\n//     return Live2DFramework.platformManager;\r\n// }\r\n//\r\n// //============================================================\r\n// //    static Live2DFramework.setPlatformManager()\r\n// //============================================================\r\n// Live2DFramework.setPlatformManager = function( platformManager /*IPlatformManager*/ )\r\n// {\r\n//     Live2DFramework.platformManager = platformManager;\r\n// }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/Live2DFramework.js","import { Live2DModelWebGL } from '../../src/lib/live2d';\r\n\r\nexport function loadBytes(path, type, callback) {\r\n  var request = new XMLHttpRequest();\r\n  request.open('GET',path, true);\r\n  request.responseType = type;\r\n  request.onload = () => {\r\n    switch (request.status) {\r\n    case 200:\r\n        callback(request.response);\r\n        break;\r\n    default:\r\n        console.error( 'Failed to load (' + request.status + ') : ' + path );\r\n        break;\r\n    }\r\n  }\r\n  request.send(null);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/netUtils.js","/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n *  (c) Modified by Icemic <bingfeng.web@gmail.com>\r\n */\r\n\r\nconst mat4 = require('./glMatrix-mat4');\r\n\r\nconst MatrixStack = {};\r\n\r\nexport default MatrixStack;\r\n\r\n\r\nMatrixStack.matrixStack = [\r\n    1, 0, 0, 0,\r\n    0, 1, 0, 0,\r\n    0, 0, 1, 0,\r\n    0, 0, 0, 1\r\n];\r\n\r\n\r\nMatrixStack.depth = 0;\r\n\r\n\r\nMatrixStack.currentMatrix = [\r\n    1, 0, 0, 0,\r\n    0, 1, 0, 0,\r\n    0, 0, 1, 0,\r\n    0, 0, 0, 1\r\n];\r\n\r\n\r\nMatrixStack.tmp = new Array(16);\r\n\r\n\r\n\r\nMatrixStack.reset = function()\r\n{\r\n    this.depth = 0;\r\n}\r\n\r\n\r\n\r\nMatrixStack.loadIdentity = function()\r\n{\r\n    // for (var i = 0; i < 16; i++)\r\n    // {\r\n    //     this.currentMatrix[i] = (i % 5 == 0) ? 1 : 0;\r\n    // }\r\n    this.currentMatrix = [\r\n        1, 0, 0, 0,\r\n        0, 1, 0, 0,\r\n        0, 0, 1, 0,\r\n        0, 0, 0, 1\r\n    ];\r\n}\r\n\r\n\r\n\r\nMatrixStack.push = function()\r\n{\r\n    // var offset = this.depth * 16;\r\n    // var nextOffset = (this.depth + 1) * 16;\r\n\r\n    // if (this.matrixStack.length < nextOffset + 16)\r\n    // {\r\n    //     this.matrixStack.length = nextOffset + 16;\r\n    // }\r\n\r\n    // for (var i = 0; i < 16; i++)\r\n    // {\r\n    //     this.matrixStack[nextOffset + i] = this.currentMatrix[i];\r\n    // }\r\n    this.matrixStack.push(this.currentMatrix);\r\n\r\n    this.depth++;\r\n}\r\n\r\n\r\n\r\nMatrixStack.pop = function()\r\n{\r\n    this.depth--;\r\n    if (this.depth < 0)\r\n    {\r\n        myError(\"Invalid matrix stack.\");\r\n        this.depth = 0;\r\n    }\r\n\r\n    // var offset = this.depth * 16;\r\n    // for (var i = 0; i < 16; i++)\r\n    // {\r\n    //     this.currentMatrix[i] = this.matrixStack[offset + i];\r\n    // }\r\n    this.currentMatrix = this.matrixStack.pop();\r\n}\r\n\r\n\r\n\r\nMatrixStack.getMatrix = function()\r\n{\r\n    return this.currentMatrix;\r\n}\r\n\r\n\r\n\r\nMatrixStack.multMatrix = function(matNew)\r\n{\r\n    // var i, j, k;\r\n\r\n    // for (i = 0; i < 16; i++)\r\n    // {\r\n    //     this.tmp[i] = 0;\r\n    // }\r\n\r\n    // for (i = 0; i < 4; i++)\r\n    // {\r\n    //     for (j = 0; j < 4; j++)\r\n    //     {\r\n    //         for (k = 0; k < 4; k++)\r\n    //         {\r\n    //             this.tmp[i + j * 4] += this.currentMatrix[i + k * 4] * matNew[k + j * 4];\r\n    //         }\r\n    //     }\r\n    // }\r\n    // for (i = 0; i < 16; i++)\r\n    // {\r\n    //     this.currentMatrix[i] = this.tmp[i];\r\n    // }\r\n    mat4.multiply(this.currentMatrix, this.currentMatrix, matNew);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/MatrixStack.js","/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE. */\r\n\r\nvar glMatrix = require(\"./glMatrix-common.js\");\r\n\r\n/**\r\n * @class 4x4 Matrix\r\n * @name mat4\r\n */\r\nvar mat4 = {\r\n  scalar: {},\r\n  SIMD: {}\r\n};\r\n\r\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\r\nmat4.create = function() {\r\n    var out = new glMatrix.ARRAY_TYPE(16);\r\n    out[0] = 1;\r\n    out[1] = 0;\r\n    out[2] = 0;\r\n    out[3] = 0;\r\n    out[4] = 0;\r\n    out[5] = 1;\r\n    out[6] = 0;\r\n    out[7] = 0;\r\n    out[8] = 0;\r\n    out[9] = 0;\r\n    out[10] = 1;\r\n    out[11] = 0;\r\n    out[12] = 0;\r\n    out[13] = 0;\r\n    out[14] = 0;\r\n    out[15] = 1;\r\n    return out;\r\n};\r\n\r\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {mat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\r\nmat4.clone = function(a) {\r\n    var out = new glMatrix.ARRAY_TYPE(16);\r\n    out[0] = a[0];\r\n    out[1] = a[1];\r\n    out[2] = a[2];\r\n    out[3] = a[3];\r\n    out[4] = a[4];\r\n    out[5] = a[5];\r\n    out[6] = a[6];\r\n    out[7] = a[7];\r\n    out[8] = a[8];\r\n    out[9] = a[9];\r\n    out[10] = a[10];\r\n    out[11] = a[11];\r\n    out[12] = a[12];\r\n    out[13] = a[13];\r\n    out[14] = a[14];\r\n    out[15] = a[15];\r\n    return out;\r\n};\r\n\r\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\r\nmat4.copy = function(out, a) {\r\n    out[0] = a[0];\r\n    out[1] = a[1];\r\n    out[2] = a[2];\r\n    out[3] = a[3];\r\n    out[4] = a[4];\r\n    out[5] = a[5];\r\n    out[6] = a[6];\r\n    out[7] = a[7];\r\n    out[8] = a[8];\r\n    out[9] = a[9];\r\n    out[10] = a[10];\r\n    out[11] = a[11];\r\n    out[12] = a[12];\r\n    out[13] = a[13];\r\n    out[14] = a[14];\r\n    out[15] = a[15];\r\n    return out;\r\n};\r\n\r\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\r\nmat4.fromValues = function(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\r\n    var out = new glMatrix.ARRAY_TYPE(16);\r\n    out[0] = m00;\r\n    out[1] = m01;\r\n    out[2] = m02;\r\n    out[3] = m03;\r\n    out[4] = m10;\r\n    out[5] = m11;\r\n    out[6] = m12;\r\n    out[7] = m13;\r\n    out[8] = m20;\r\n    out[9] = m21;\r\n    out[10] = m22;\r\n    out[11] = m23;\r\n    out[12] = m30;\r\n    out[13] = m31;\r\n    out[14] = m32;\r\n    out[15] = m33;\r\n    return out;\r\n};\r\n\r\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\r\nmat4.set = function(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\r\n    out[0] = m00;\r\n    out[1] = m01;\r\n    out[2] = m02;\r\n    out[3] = m03;\r\n    out[4] = m10;\r\n    out[5] = m11;\r\n    out[6] = m12;\r\n    out[7] = m13;\r\n    out[8] = m20;\r\n    out[9] = m21;\r\n    out[10] = m22;\r\n    out[11] = m23;\r\n    out[12] = m30;\r\n    out[13] = m31;\r\n    out[14] = m32;\r\n    out[15] = m33;\r\n    return out;\r\n};\r\n\r\n\r\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\r\nmat4.identity = function(out) {\r\n    out[0] = 1;\r\n    out[1] = 0;\r\n    out[2] = 0;\r\n    out[3] = 0;\r\n    out[4] = 0;\r\n    out[5] = 1;\r\n    out[6] = 0;\r\n    out[7] = 0;\r\n    out[8] = 0;\r\n    out[9] = 0;\r\n    out[10] = 1;\r\n    out[11] = 0;\r\n    out[12] = 0;\r\n    out[13] = 0;\r\n    out[14] = 0;\r\n    out[15] = 1;\r\n    return out;\r\n};\r\n\r\n/**\r\n * Transpose the values of a mat4 not using SIMD\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\r\nmat4.scalar.transpose = function(out, a) {\r\n    // If we are transposing ourselves we can skip a few steps but have to cache some values\r\n    if (out === a) {\r\n        var a01 = a[1], a02 = a[2], a03 = a[3],\r\n            a12 = a[6], a13 = a[7],\r\n            a23 = a[11];\r\n\r\n        out[1] = a[4];\r\n        out[2] = a[8];\r\n        out[3] = a[12];\r\n        out[4] = a01;\r\n        out[6] = a[9];\r\n        out[7] = a[13];\r\n        out[8] = a02;\r\n        out[9] = a12;\r\n        out[11] = a[14];\r\n        out[12] = a03;\r\n        out[13] = a13;\r\n        out[14] = a23;\r\n    } else {\r\n        out[0] = a[0];\r\n        out[1] = a[4];\r\n        out[2] = a[8];\r\n        out[3] = a[12];\r\n        out[4] = a[1];\r\n        out[5] = a[5];\r\n        out[6] = a[9];\r\n        out[7] = a[13];\r\n        out[8] = a[2];\r\n        out[9] = a[6];\r\n        out[10] = a[10];\r\n        out[11] = a[14];\r\n        out[12] = a[3];\r\n        out[13] = a[7];\r\n        out[14] = a[11];\r\n        out[15] = a[15];\r\n    }\r\n\r\n    return out;\r\n};\r\n\r\n/**\r\n * Transpose the values of a mat4 using SIMD\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\r\nmat4.SIMD.transpose = function(out, a) {\r\n    var a0, a1, a2, a3,\r\n        tmp01, tmp23,\r\n        out0, out1, out2, out3;\r\n\r\n    a0 = SIMD.Float32x4.load(a, 0);\r\n    a1 = SIMD.Float32x4.load(a, 4);\r\n    a2 = SIMD.Float32x4.load(a, 8);\r\n    a3 = SIMD.Float32x4.load(a, 12);\r\n\r\n    tmp01 = SIMD.Float32x4.shuffle(a0, a1, 0, 1, 4, 5);\r\n    tmp23 = SIMD.Float32x4.shuffle(a2, a3, 0, 1, 4, 5);\r\n    out0  = SIMD.Float32x4.shuffle(tmp01, tmp23, 0, 2, 4, 6);\r\n    out1  = SIMD.Float32x4.shuffle(tmp01, tmp23, 1, 3, 5, 7);\r\n    SIMD.Float32x4.store(out, 0,  out0);\r\n    SIMD.Float32x4.store(out, 4,  out1);\r\n\r\n    tmp01 = SIMD.Float32x4.shuffle(a0, a1, 2, 3, 6, 7);\r\n    tmp23 = SIMD.Float32x4.shuffle(a2, a3, 2, 3, 6, 7);\r\n    out2  = SIMD.Float32x4.shuffle(tmp01, tmp23, 0, 2, 4, 6);\r\n    out3  = SIMD.Float32x4.shuffle(tmp01, tmp23, 1, 3, 5, 7);\r\n    SIMD.Float32x4.store(out, 8,  out2);\r\n    SIMD.Float32x4.store(out, 12, out3);\r\n\r\n    return out;\r\n};\r\n\r\n/**\r\n * Transpse a mat4 using SIMD if available and enabled\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\r\nmat4.transpose = glMatrix.USE_SIMD ? mat4.SIMD.transpose : mat4.scalar.transpose;\r\n\r\n/**\r\n * Inverts a mat4 not using SIMD\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\r\nmat4.scalar.invert = function(out, a) {\r\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\r\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\r\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\r\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15],\r\n\r\n        b00 = a00 * a11 - a01 * a10,\r\n        b01 = a00 * a12 - a02 * a10,\r\n        b02 = a00 * a13 - a03 * a10,\r\n        b03 = a01 * a12 - a02 * a11,\r\n        b04 = a01 * a13 - a03 * a11,\r\n        b05 = a02 * a13 - a03 * a12,\r\n        b06 = a20 * a31 - a21 * a30,\r\n        b07 = a20 * a32 - a22 * a30,\r\n        b08 = a20 * a33 - a23 * a30,\r\n        b09 = a21 * a32 - a22 * a31,\r\n        b10 = a21 * a33 - a23 * a31,\r\n        b11 = a22 * a33 - a23 * a32,\r\n\r\n        // Calculate the determinant\r\n        det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\r\n\r\n    if (!det) {\r\n        return null;\r\n    }\r\n    det = 1.0 / det;\r\n\r\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\r\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\r\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\r\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\r\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\r\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\r\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\r\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\r\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\r\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\r\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\r\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\r\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\r\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\r\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\r\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\r\n\r\n    return out;\r\n};\r\n\r\n/**\r\n * Inverts a mat4 using SIMD\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\r\nmat4.SIMD.invert = function(out, a) {\r\n  var row0, row1, row2, row3,\r\n      tmp1,\r\n      minor0, minor1, minor2, minor3,\r\n      det,\r\n      a0 = SIMD.Float32x4.load(a, 0),\r\n      a1 = SIMD.Float32x4.load(a, 4),\r\n      a2 = SIMD.Float32x4.load(a, 8),\r\n      a3 = SIMD.Float32x4.load(a, 12);\r\n\r\n  // Compute matrix adjugate\r\n  tmp1 = SIMD.Float32x4.shuffle(a0, a1, 0, 1, 4, 5);\r\n  row1 = SIMD.Float32x4.shuffle(a2, a3, 0, 1, 4, 5);\r\n  row0 = SIMD.Float32x4.shuffle(tmp1, row1, 0, 2, 4, 6);\r\n  row1 = SIMD.Float32x4.shuffle(row1, tmp1, 1, 3, 5, 7);\r\n  tmp1 = SIMD.Float32x4.shuffle(a0, a1, 2, 3, 6, 7);\r\n  row3 = SIMD.Float32x4.shuffle(a2, a3, 2, 3, 6, 7);\r\n  row2 = SIMD.Float32x4.shuffle(tmp1, row3, 0, 2, 4, 6);\r\n  row3 = SIMD.Float32x4.shuffle(row3, tmp1, 1, 3, 5, 7);\r\n\r\n  tmp1   = SIMD.Float32x4.mul(row2, row3);\r\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 1, 0, 3, 2);\r\n  minor0 = SIMD.Float32x4.mul(row1, tmp1);\r\n  minor1 = SIMD.Float32x4.mul(row0, tmp1);\r\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 2, 3, 0, 1);\r\n  minor0 = SIMD.Float32x4.sub(SIMD.Float32x4.mul(row1, tmp1), minor0);\r\n  minor1 = SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0, tmp1), minor1);\r\n  minor1 = SIMD.Float32x4.swizzle(minor1, 2, 3, 0, 1);\r\n\r\n  tmp1   = SIMD.Float32x4.mul(row1, row2);\r\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 1, 0, 3, 2);\r\n  minor0 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row3, tmp1), minor0);\r\n  minor3 = SIMD.Float32x4.mul(row0, tmp1);\r\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 2, 3, 0, 1);\r\n  minor0 = SIMD.Float32x4.sub(minor0, SIMD.Float32x4.mul(row3, tmp1));\r\n  minor3 = SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0, tmp1), minor3);\r\n  minor3 = SIMD.Float32x4.swizzle(minor3, 2, 3, 0, 1);\r\n\r\n  tmp1   = SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(row1, 2, 3, 0, 1), row3);\r\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 1, 0, 3, 2);\r\n  row2   = SIMD.Float32x4.swizzle(row2, 2, 3, 0, 1);\r\n  minor0 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row2, tmp1), minor0);\r\n  minor2 = SIMD.Float32x4.mul(row0, tmp1);\r\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 2, 3, 0, 1);\r\n  minor0 = SIMD.Float32x4.sub(minor0, SIMD.Float32x4.mul(row2, tmp1));\r\n  minor2 = SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0, tmp1), minor2);\r\n  minor2 = SIMD.Float32x4.swizzle(minor2, 2, 3, 0, 1);\r\n\r\n  tmp1   = SIMD.Float32x4.mul(row0, row1);\r\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 1, 0, 3, 2);\r\n  minor2 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row3, tmp1), minor2);\r\n  minor3 = SIMD.Float32x4.sub(SIMD.Float32x4.mul(row2, tmp1), minor3);\r\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 2, 3, 0, 1);\r\n  minor2 = SIMD.Float32x4.sub(SIMD.Float32x4.mul(row3, tmp1), minor2);\r\n  minor3 = SIMD.Float32x4.sub(minor3, SIMD.Float32x4.mul(row2, tmp1));\r\n\r\n  tmp1   = SIMD.Float32x4.mul(row0, row3);\r\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 1, 0, 3, 2);\r\n  minor1 = SIMD.Float32x4.sub(minor1, SIMD.Float32x4.mul(row2, tmp1));\r\n  minor2 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row1, tmp1), minor2);\r\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 2, 3, 0, 1);\r\n  minor1 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row2, tmp1), minor1);\r\n  minor2 = SIMD.Float32x4.sub(minor2, SIMD.Float32x4.mul(row1, tmp1));\r\n\r\n  tmp1   = SIMD.Float32x4.mul(row0, row2);\r\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 1, 0, 3, 2);\r\n  minor1 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row3, tmp1), minor1);\r\n  minor3 = SIMD.Float32x4.sub(minor3, SIMD.Float32x4.mul(row1, tmp1));\r\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 2, 3, 0, 1);\r\n  minor1 = SIMD.Float32x4.sub(minor1, SIMD.Float32x4.mul(row3, tmp1));\r\n  minor3 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row1, tmp1), minor3);\r\n\r\n  // Compute matrix determinant\r\n  det   = SIMD.Float32x4.mul(row0, minor0);\r\n  det   = SIMD.Float32x4.add(SIMD.Float32x4.swizzle(det, 2, 3, 0, 1), det);\r\n  det   = SIMD.Float32x4.add(SIMD.Float32x4.swizzle(det, 1, 0, 3, 2), det);\r\n  tmp1  = SIMD.Float32x4.reciprocalApproximation(det);\r\n  det   = SIMD.Float32x4.sub(\r\n               SIMD.Float32x4.add(tmp1, tmp1),\r\n               SIMD.Float32x4.mul(det, SIMD.Float32x4.mul(tmp1, tmp1)));\r\n  det   = SIMD.Float32x4.swizzle(det, 0, 0, 0, 0);\r\n  if (!det) {\r\n      return null;\r\n  }\r\n\r\n  // Compute matrix inverse\r\n  SIMD.Float32x4.store(out, 0,  SIMD.Float32x4.mul(det, minor0));\r\n  SIMD.Float32x4.store(out, 4,  SIMD.Float32x4.mul(det, minor1));\r\n  SIMD.Float32x4.store(out, 8,  SIMD.Float32x4.mul(det, minor2));\r\n  SIMD.Float32x4.store(out, 12, SIMD.Float32x4.mul(det, minor3));\r\n  return out;\r\n}\r\n\r\n/**\r\n * Inverts a mat4 using SIMD if available and enabled\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\r\nmat4.invert = glMatrix.USE_SIMD ? mat4.SIMD.invert : mat4.scalar.invert;\r\n\r\n/**\r\n * Calculates the adjugate of a mat4 not using SIMD\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\r\nmat4.scalar.adjoint = function(out, a) {\r\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\r\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\r\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\r\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\r\n\r\n    out[0]  =  (a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22));\r\n    out[1]  = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\r\n    out[2]  =  (a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12));\r\n    out[3]  = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\r\n    out[4]  = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\r\n    out[5]  =  (a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22));\r\n    out[6]  = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\r\n    out[7]  =  (a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12));\r\n    out[8]  =  (a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21));\r\n    out[9]  = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\r\n    out[10] =  (a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11));\r\n    out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\r\n    out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\r\n    out[13] =  (a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21));\r\n    out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\r\n    out[15] =  (a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11));\r\n    return out;\r\n};\r\n\r\n/**\r\n * Calculates the adjugate of a mat4 using SIMD\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\r\nmat4.SIMD.adjoint = function(out, a) {\r\n  var a0, a1, a2, a3;\r\n  var row0, row1, row2, row3;\r\n  var tmp1;\r\n  var minor0, minor1, minor2, minor3;\r\n\r\n  a0 = SIMD.Float32x4.load(a, 0);\r\n  a1 = SIMD.Float32x4.load(a, 4);\r\n  a2 = SIMD.Float32x4.load(a, 8);\r\n  a3 = SIMD.Float32x4.load(a, 12);\r\n\r\n  // Transpose the source matrix.  Sort of.  Not a true transpose operation\r\n  tmp1 = SIMD.Float32x4.shuffle(a0, a1, 0, 1, 4, 5);\r\n  row1 = SIMD.Float32x4.shuffle(a2, a3, 0, 1, 4, 5);\r\n  row0 = SIMD.Float32x4.shuffle(tmp1, row1, 0, 2, 4, 6);\r\n  row1 = SIMD.Float32x4.shuffle(row1, tmp1, 1, 3, 5, 7);\r\n\r\n  tmp1 = SIMD.Float32x4.shuffle(a0, a1, 2, 3, 6, 7);\r\n  row3 = SIMD.Float32x4.shuffle(a2, a3, 2, 3, 6, 7);\r\n  row2 = SIMD.Float32x4.shuffle(tmp1, row3, 0, 2, 4, 6);\r\n  row3 = SIMD.Float32x4.shuffle(row3, tmp1, 1, 3, 5, 7);\r\n\r\n  tmp1   = SIMD.Float32x4.mul(row2, row3);\r\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 1, 0, 3, 2);\r\n  minor0 = SIMD.Float32x4.mul(row1, tmp1);\r\n  minor1 = SIMD.Float32x4.mul(row0, tmp1);\r\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 2, 3, 0, 1);\r\n  minor0 = SIMD.Float32x4.sub(SIMD.Float32x4.mul(row1, tmp1), minor0);\r\n  minor1 = SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0, tmp1), minor1);\r\n  minor1 = SIMD.Float32x4.swizzle(minor1, 2, 3, 0, 1);\r\n\r\n  tmp1   = SIMD.Float32x4.mul(row1, row2);\r\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 1, 0, 3, 2);\r\n  minor0 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row3, tmp1), minor0);\r\n  minor3 = SIMD.Float32x4.mul(row0, tmp1);\r\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 2, 3, 0, 1);\r\n  minor0 = SIMD.Float32x4.sub(minor0, SIMD.Float32x4.mul(row3, tmp1));\r\n  minor3 = SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0, tmp1), minor3);\r\n  minor3 = SIMD.Float32x4.swizzle(minor3, 2, 3, 0, 1);\r\n\r\n  tmp1   = SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(row1, 2, 3, 0, 1), row3);\r\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 1, 0, 3, 2);\r\n  row2   = SIMD.Float32x4.swizzle(row2, 2, 3, 0, 1);\r\n  minor0 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row2, tmp1), minor0);\r\n  minor2 = SIMD.Float32x4.mul(row0, tmp1);\r\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 2, 3, 0, 1);\r\n  minor0 = SIMD.Float32x4.sub(minor0, SIMD.Float32x4.mul(row2, tmp1));\r\n  minor2 = SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0, tmp1), minor2);\r\n  minor2 = SIMD.Float32x4.swizzle(minor2, 2, 3, 0, 1);\r\n\r\n  tmp1   = SIMD.Float32x4.mul(row0, row1);\r\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 1, 0, 3, 2);\r\n  minor2 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row3, tmp1), minor2);\r\n  minor3 = SIMD.Float32x4.sub(SIMD.Float32x4.mul(row2, tmp1), minor3);\r\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 2, 3, 0, 1);\r\n  minor2 = SIMD.Float32x4.sub(SIMD.Float32x4.mul(row3, tmp1), minor2);\r\n  minor3 = SIMD.Float32x4.sub(minor3, SIMD.Float32x4.mul(row2, tmp1));\r\n\r\n  tmp1   = SIMD.Float32x4.mul(row0, row3);\r\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 1, 0, 3, 2);\r\n  minor1 = SIMD.Float32x4.sub(minor1, SIMD.Float32x4.mul(row2, tmp1));\r\n  minor2 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row1, tmp1), minor2);\r\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 2, 3, 0, 1);\r\n  minor1 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row2, tmp1), minor1);\r\n  minor2 = SIMD.Float32x4.sub(minor2, SIMD.Float32x4.mul(row1, tmp1));\r\n\r\n  tmp1   = SIMD.Float32x4.mul(row0, row2);\r\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 1, 0, 3, 2);\r\n  minor1 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row3, tmp1), minor1);\r\n  minor3 = SIMD.Float32x4.sub(minor3, SIMD.Float32x4.mul(row1, tmp1));\r\n  tmp1   = SIMD.Float32x4.swizzle(tmp1, 2, 3, 0, 1);\r\n  minor1 = SIMD.Float32x4.sub(minor1, SIMD.Float32x4.mul(row3, tmp1));\r\n  minor3 = SIMD.Float32x4.add(SIMD.Float32x4.mul(row1, tmp1), minor3);\r\n\r\n  SIMD.Float32x4.store(out, 0,  minor0);\r\n  SIMD.Float32x4.store(out, 4,  minor1);\r\n  SIMD.Float32x4.store(out, 8,  minor2);\r\n  SIMD.Float32x4.store(out, 12, minor3);\r\n  return out;\r\n};\r\n\r\n/**\r\n * Calculates the adjugate of a mat4 using SIMD if available and enabled\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\r\n mat4.adjoint = glMatrix.USE_SIMD ? mat4.SIMD.adjoint : mat4.scalar.adjoint;\r\n\r\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {mat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\r\nmat4.determinant = function (a) {\r\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\r\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\r\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\r\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15],\r\n\r\n        b00 = a00 * a11 - a01 * a10,\r\n        b01 = a00 * a12 - a02 * a10,\r\n        b02 = a00 * a13 - a03 * a10,\r\n        b03 = a01 * a12 - a02 * a11,\r\n        b04 = a01 * a13 - a03 * a11,\r\n        b05 = a02 * a13 - a03 * a12,\r\n        b06 = a20 * a31 - a21 * a30,\r\n        b07 = a20 * a32 - a22 * a30,\r\n        b08 = a20 * a33 - a23 * a30,\r\n        b09 = a21 * a32 - a22 * a31,\r\n        b10 = a21 * a33 - a23 * a31,\r\n        b11 = a22 * a33 - a23 * a32;\r\n\r\n    // Calculate the determinant\r\n    return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\r\n};\r\n\r\n/**\r\n * Multiplies two mat4's explicitly using SIMD\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand, must be a Float32Array\r\n * @param {mat4} b the second operand, must be a Float32Array\r\n * @returns {mat4} out\r\n */\r\nmat4.SIMD.multiply = function (out, a, b) {\r\n    var a0 = SIMD.Float32x4.load(a, 0);\r\n    var a1 = SIMD.Float32x4.load(a, 4);\r\n    var a2 = SIMD.Float32x4.load(a, 8);\r\n    var a3 = SIMD.Float32x4.load(a, 12);\r\n\r\n    var b0 = SIMD.Float32x4.load(b, 0);\r\n    var out0 = SIMD.Float32x4.add(\r\n                   SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b0, 0, 0, 0, 0), a0),\r\n                   SIMD.Float32x4.add(\r\n                       SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b0, 1, 1, 1, 1), a1),\r\n                       SIMD.Float32x4.add(\r\n                           SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b0, 2, 2, 2, 2), a2),\r\n                           SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b0, 3, 3, 3, 3), a3))));\r\n    SIMD.Float32x4.store(out, 0, out0);\r\n\r\n    var b1 = SIMD.Float32x4.load(b, 4);\r\n    var out1 = SIMD.Float32x4.add(\r\n                   SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b1, 0, 0, 0, 0), a0),\r\n                   SIMD.Float32x4.add(\r\n                       SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b1, 1, 1, 1, 1), a1),\r\n                       SIMD.Float32x4.add(\r\n                           SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b1, 2, 2, 2, 2), a2),\r\n                           SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b1, 3, 3, 3, 3), a3))));\r\n    SIMD.Float32x4.store(out, 4, out1);\r\n\r\n    var b2 = SIMD.Float32x4.load(b, 8);\r\n    var out2 = SIMD.Float32x4.add(\r\n                   SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b2, 0, 0, 0, 0), a0),\r\n                   SIMD.Float32x4.add(\r\n                       SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b2, 1, 1, 1, 1), a1),\r\n                       SIMD.Float32x4.add(\r\n                               SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b2, 2, 2, 2, 2), a2),\r\n                               SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b2, 3, 3, 3, 3), a3))));\r\n    SIMD.Float32x4.store(out, 8, out2);\r\n\r\n    var b3 = SIMD.Float32x4.load(b, 12);\r\n    var out3 = SIMD.Float32x4.add(\r\n                   SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b3, 0, 0, 0, 0), a0),\r\n                   SIMD.Float32x4.add(\r\n                        SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b3, 1, 1, 1, 1), a1),\r\n                        SIMD.Float32x4.add(\r\n                            SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b3, 2, 2, 2, 2), a2),\r\n                            SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b3, 3, 3, 3, 3), a3))));\r\n    SIMD.Float32x4.store(out, 12, out3);\r\n\r\n    return out;\r\n};\r\n\r\n/**\r\n * Multiplies two mat4's explicitly not using SIMD\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\r\nmat4.scalar.multiply = function (out, a, b) {\r\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\r\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\r\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\r\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\r\n\r\n    // Cache only the current line of the second matrix\r\n    var b0  = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\r\n    out[0] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\r\n    out[1] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\r\n    out[2] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\r\n    out[3] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\r\n\r\n    b0 = b[4]; b1 = b[5]; b2 = b[6]; b3 = b[7];\r\n    out[4] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\r\n    out[5] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\r\n    out[6] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\r\n    out[7] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\r\n\r\n    b0 = b[8]; b1 = b[9]; b2 = b[10]; b3 = b[11];\r\n    out[8] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\r\n    out[9] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\r\n    out[10] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\r\n    out[11] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\r\n\r\n    b0 = b[12]; b1 = b[13]; b2 = b[14]; b3 = b[15];\r\n    out[12] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\r\n    out[13] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\r\n    out[14] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\r\n    out[15] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\r\n    return out;\r\n};\r\n\r\n/**\r\n * Multiplies two mat4's using SIMD if available and enabled\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\r\nmat4.multiply = glMatrix.USE_SIMD ? mat4.SIMD.multiply : mat4.scalar.multiply;\r\n\r\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\r\nmat4.mul = mat4.multiply;\r\n\r\n/**\r\n * Translate a mat4 by the given vector not using SIMD\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to translate\r\n * @param {vec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\r\nmat4.scalar.translate = function (out, a, v) {\r\n    var x = v[0], y = v[1], z = v[2],\r\n        a00, a01, a02, a03,\r\n        a10, a11, a12, a13,\r\n        a20, a21, a22, a23;\r\n\r\n    if (a === out) {\r\n        out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\r\n        out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\r\n        out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\r\n        out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\r\n    } else {\r\n        a00 = a[0]; a01 = a[1]; a02 = a[2]; a03 = a[3];\r\n        a10 = a[4]; a11 = a[5]; a12 = a[6]; a13 = a[7];\r\n        a20 = a[8]; a21 = a[9]; a22 = a[10]; a23 = a[11];\r\n\r\n        out[0] = a00; out[1] = a01; out[2] = a02; out[3] = a03;\r\n        out[4] = a10; out[5] = a11; out[6] = a12; out[7] = a13;\r\n        out[8] = a20; out[9] = a21; out[10] = a22; out[11] = a23;\r\n\r\n        out[12] = a00 * x + a10 * y + a20 * z + a[12];\r\n        out[13] = a01 * x + a11 * y + a21 * z + a[13];\r\n        out[14] = a02 * x + a12 * y + a22 * z + a[14];\r\n        out[15] = a03 * x + a13 * y + a23 * z + a[15];\r\n    }\r\n\r\n    return out;\r\n};\r\n\r\n/**\r\n * Translates a mat4 by the given vector using SIMD\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to translate\r\n * @param {vec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\r\nmat4.SIMD.translate = function (out, a, v) {\r\n    var a0 = SIMD.Float32x4.load(a, 0),\r\n        a1 = SIMD.Float32x4.load(a, 4),\r\n        a2 = SIMD.Float32x4.load(a, 8),\r\n        a3 = SIMD.Float32x4.load(a, 12),\r\n        vec = SIMD.Float32x4(v[0], v[1], v[2] , 0);\r\n\r\n    if (a !== out) {\r\n        out[0] = a[0]; out[1] = a[1]; out[2] = a[2]; out[3] = a[3];\r\n        out[4] = a[4]; out[5] = a[5]; out[6] = a[6]; out[7] = a[7];\r\n        out[8] = a[8]; out[9] = a[9]; out[10] = a[10]; out[11] = a[11];\r\n    }\r\n\r\n    a0 = SIMD.Float32x4.mul(a0, SIMD.Float32x4.swizzle(vec, 0, 0, 0, 0));\r\n    a1 = SIMD.Float32x4.mul(a1, SIMD.Float32x4.swizzle(vec, 1, 1, 1, 1));\r\n    a2 = SIMD.Float32x4.mul(a2, SIMD.Float32x4.swizzle(vec, 2, 2, 2, 2));\r\n\r\n    var t0 = SIMD.Float32x4.add(a0, SIMD.Float32x4.add(a1, SIMD.Float32x4.add(a2, a3)));\r\n    SIMD.Float32x4.store(out, 12, t0);\r\n\r\n    return out;\r\n};\r\n\r\n/**\r\n * Translates a mat4 by the given vector using SIMD if available and enabled\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to translate\r\n * @param {vec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\r\nmat4.translate = glMatrix.USE_SIMD ? mat4.SIMD.translate : mat4.scalar.translate;\r\n\r\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {vec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\r\nmat4.scalar.scale = function(out, a, v) {\r\n    var x = v[0], y = v[1], z = v[2];\r\n\r\n    out[0] = a[0] * x;\r\n    out[1] = a[1] * x;\r\n    out[2] = a[2] * x;\r\n    out[3] = a[3] * x;\r\n    out[4] = a[4] * y;\r\n    out[5] = a[5] * y;\r\n    out[6] = a[6] * y;\r\n    out[7] = a[7] * y;\r\n    out[8] = a[8] * z;\r\n    out[9] = a[9] * z;\r\n    out[10] = a[10] * z;\r\n    out[11] = a[11] * z;\r\n    out[12] = a[12];\r\n    out[13] = a[13];\r\n    out[14] = a[14];\r\n    out[15] = a[15];\r\n    return out;\r\n};\r\n\r\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {vec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\r\nmat4.SIMD.scale = function(out, a, v) {\r\n    var a0, a1, a2;\r\n    var vec = SIMD.Float32x4(v[0], v[1], v[2], 0);\r\n\r\n    a0 = SIMD.Float32x4.load(a, 0);\r\n    SIMD.Float32x4.store(\r\n        out, 0, SIMD.Float32x4.mul(a0, SIMD.Float32x4.swizzle(vec, 0, 0, 0, 0)));\r\n\r\n    a1 = SIMD.Float32x4.load(a, 4);\r\n    SIMD.Float32x4.store(\r\n        out, 4, SIMD.Float32x4.mul(a1, SIMD.Float32x4.swizzle(vec, 1, 1, 1, 1)));\r\n\r\n    a2 = SIMD.Float32x4.load(a, 8);\r\n    SIMD.Float32x4.store(\r\n        out, 8, SIMD.Float32x4.mul(a2, SIMD.Float32x4.swizzle(vec, 2, 2, 2, 2)));\r\n\r\n    out[12] = a[12];\r\n    out[13] = a[13];\r\n    out[14] = a[14];\r\n    out[15] = a[15];\r\n    return out;\r\n};\r\n\r\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 using SIMD if available and enabled\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {vec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n */\r\nmat4.scale = glMatrix.USE_SIMD ? mat4.SIMD.scale : mat4.scalar.scale;\r\n\r\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\r\nmat4.rotate = function (out, a, rad, axis) {\r\n    var x = axis[0], y = axis[1], z = axis[2],\r\n        len = Math.sqrt(x * x + y * y + z * z),\r\n        s, c, t,\r\n        a00, a01, a02, a03,\r\n        a10, a11, a12, a13,\r\n        a20, a21, a22, a23,\r\n        b00, b01, b02,\r\n        b10, b11, b12,\r\n        b20, b21, b22;\r\n\r\n    if (Math.abs(len) < glMatrix.EPSILON) { return null; }\r\n\r\n    len = 1 / len;\r\n    x *= len;\r\n    y *= len;\r\n    z *= len;\r\n\r\n    s = Math.sin(rad);\r\n    c = Math.cos(rad);\r\n    t = 1 - c;\r\n\r\n    a00 = a[0]; a01 = a[1]; a02 = a[2]; a03 = a[3];\r\n    a10 = a[4]; a11 = a[5]; a12 = a[6]; a13 = a[7];\r\n    a20 = a[8]; a21 = a[9]; a22 = a[10]; a23 = a[11];\r\n\r\n    // Construct the elements of the rotation matrix\r\n    b00 = x * x * t + c; b01 = y * x * t + z * s; b02 = z * x * t - y * s;\r\n    b10 = x * y * t - z * s; b11 = y * y * t + c; b12 = z * y * t + x * s;\r\n    b20 = x * z * t + y * s; b21 = y * z * t - x * s; b22 = z * z * t + c;\r\n\r\n    // Perform rotation-specific matrix multiplication\r\n    out[0] = a00 * b00 + a10 * b01 + a20 * b02;\r\n    out[1] = a01 * b00 + a11 * b01 + a21 * b02;\r\n    out[2] = a02 * b00 + a12 * b01 + a22 * b02;\r\n    out[3] = a03 * b00 + a13 * b01 + a23 * b02;\r\n    out[4] = a00 * b10 + a10 * b11 + a20 * b12;\r\n    out[5] = a01 * b10 + a11 * b11 + a21 * b12;\r\n    out[6] = a02 * b10 + a12 * b11 + a22 * b12;\r\n    out[7] = a03 * b10 + a13 * b11 + a23 * b12;\r\n    out[8] = a00 * b20 + a10 * b21 + a20 * b22;\r\n    out[9] = a01 * b20 + a11 * b21 + a21 * b22;\r\n    out[10] = a02 * b20 + a12 * b21 + a22 * b22;\r\n    out[11] = a03 * b20 + a13 * b21 + a23 * b22;\r\n\r\n    if (a !== out) { // If the source and destination differ, copy the unchanged last row\r\n        out[12] = a[12];\r\n        out[13] = a[13];\r\n        out[14] = a[14];\r\n        out[15] = a[15];\r\n    }\r\n    return out;\r\n};\r\n\r\n/**\r\n * Rotates a matrix by the given angle around the X axis not using SIMD\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nmat4.scalar.rotateX = function (out, a, rad) {\r\n    var s = Math.sin(rad),\r\n        c = Math.cos(rad),\r\n        a10 = a[4],\r\n        a11 = a[5],\r\n        a12 = a[6],\r\n        a13 = a[7],\r\n        a20 = a[8],\r\n        a21 = a[9],\r\n        a22 = a[10],\r\n        a23 = a[11];\r\n\r\n    if (a !== out) { // If the source and destination differ, copy the unchanged rows\r\n        out[0]  = a[0];\r\n        out[1]  = a[1];\r\n        out[2]  = a[2];\r\n        out[3]  = a[3];\r\n        out[12] = a[12];\r\n        out[13] = a[13];\r\n        out[14] = a[14];\r\n        out[15] = a[15];\r\n    }\r\n\r\n    // Perform axis-specific matrix multiplication\r\n    out[4] = a10 * c + a20 * s;\r\n    out[5] = a11 * c + a21 * s;\r\n    out[6] = a12 * c + a22 * s;\r\n    out[7] = a13 * c + a23 * s;\r\n    out[8] = a20 * c - a10 * s;\r\n    out[9] = a21 * c - a11 * s;\r\n    out[10] = a22 * c - a12 * s;\r\n    out[11] = a23 * c - a13 * s;\r\n    return out;\r\n};\r\n\r\n/**\r\n * Rotates a matrix by the given angle around the X axis using SIMD\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nmat4.SIMD.rotateX = function (out, a, rad) {\r\n    var s = SIMD.Float32x4.splat(Math.sin(rad)),\r\n        c = SIMD.Float32x4.splat(Math.cos(rad));\r\n\r\n    if (a !== out) { // If the source and destination differ, copy the unchanged rows\r\n      out[0]  = a[0];\r\n      out[1]  = a[1];\r\n      out[2]  = a[2];\r\n      out[3]  = a[3];\r\n      out[12] = a[12];\r\n      out[13] = a[13];\r\n      out[14] = a[14];\r\n      out[15] = a[15];\r\n    }\r\n\r\n    // Perform axis-specific matrix multiplication\r\n    var a_1 = SIMD.Float32x4.load(a, 4);\r\n    var a_2 = SIMD.Float32x4.load(a, 8);\r\n    SIMD.Float32x4.store(out, 4,\r\n                         SIMD.Float32x4.add(SIMD.Float32x4.mul(a_1, c), SIMD.Float32x4.mul(a_2, s)));\r\n    SIMD.Float32x4.store(out, 8,\r\n                         SIMD.Float32x4.sub(SIMD.Float32x4.mul(a_2, c), SIMD.Float32x4.mul(a_1, s)));\r\n    return out;\r\n};\r\n\r\n/**\r\n * Rotates a matrix by the given angle around the X axis using SIMD if availabe and enabled\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nmat4.rotateX = glMatrix.USE_SIMD ? mat4.SIMD.rotateX : mat4.scalar.rotateX;\r\n\r\n/**\r\n * Rotates a matrix by the given angle around the Y axis not using SIMD\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nmat4.scalar.rotateY = function (out, a, rad) {\r\n    var s = Math.sin(rad),\r\n        c = Math.cos(rad),\r\n        a00 = a[0],\r\n        a01 = a[1],\r\n        a02 = a[2],\r\n        a03 = a[3],\r\n        a20 = a[8],\r\n        a21 = a[9],\r\n        a22 = a[10],\r\n        a23 = a[11];\r\n\r\n    if (a !== out) { // If the source and destination differ, copy the unchanged rows\r\n        out[4]  = a[4];\r\n        out[5]  = a[5];\r\n        out[6]  = a[6];\r\n        out[7]  = a[7];\r\n        out[12] = a[12];\r\n        out[13] = a[13];\r\n        out[14] = a[14];\r\n        out[15] = a[15];\r\n    }\r\n\r\n    // Perform axis-specific matrix multiplication\r\n    out[0] = a00 * c - a20 * s;\r\n    out[1] = a01 * c - a21 * s;\r\n    out[2] = a02 * c - a22 * s;\r\n    out[3] = a03 * c - a23 * s;\r\n    out[8] = a00 * s + a20 * c;\r\n    out[9] = a01 * s + a21 * c;\r\n    out[10] = a02 * s + a22 * c;\r\n    out[11] = a03 * s + a23 * c;\r\n    return out;\r\n};\r\n\r\n/**\r\n * Rotates a matrix by the given angle around the Y axis using SIMD\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nmat4.SIMD.rotateY = function (out, a, rad) {\r\n    var s = SIMD.Float32x4.splat(Math.sin(rad)),\r\n        c = SIMD.Float32x4.splat(Math.cos(rad));\r\n\r\n    if (a !== out) { // If the source and destination differ, copy the unchanged rows\r\n        out[4]  = a[4];\r\n        out[5]  = a[5];\r\n        out[6]  = a[6];\r\n        out[7]  = a[7];\r\n        out[12] = a[12];\r\n        out[13] = a[13];\r\n        out[14] = a[14];\r\n        out[15] = a[15];\r\n    }\r\n\r\n    // Perform axis-specific matrix multiplication\r\n    var a_0 = SIMD.Float32x4.load(a, 0);\r\n    var a_2 = SIMD.Float32x4.load(a, 8);\r\n    SIMD.Float32x4.store(out, 0,\r\n                         SIMD.Float32x4.sub(SIMD.Float32x4.mul(a_0, c), SIMD.Float32x4.mul(a_2, s)));\r\n    SIMD.Float32x4.store(out, 8,\r\n                         SIMD.Float32x4.add(SIMD.Float32x4.mul(a_0, s), SIMD.Float32x4.mul(a_2, c)));\r\n    return out;\r\n};\r\n\r\n/**\r\n * Rotates a matrix by the given angle around the Y axis if SIMD available and enabled\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\n mat4.rotateY = glMatrix.USE_SIMD ? mat4.SIMD.rotateY : mat4.scalar.rotateY;\r\n\r\n/**\r\n * Rotates a matrix by the given angle around the Z axis not using SIMD\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nmat4.scalar.rotateZ = function (out, a, rad) {\r\n    var s = Math.sin(rad),\r\n        c = Math.cos(rad),\r\n        a00 = a[0],\r\n        a01 = a[1],\r\n        a02 = a[2],\r\n        a03 = a[3],\r\n        a10 = a[4],\r\n        a11 = a[5],\r\n        a12 = a[6],\r\n        a13 = a[7];\r\n\r\n    if (a !== out) { // If the source and destination differ, copy the unchanged last row\r\n        out[8]  = a[8];\r\n        out[9]  = a[9];\r\n        out[10] = a[10];\r\n        out[11] = a[11];\r\n        out[12] = a[12];\r\n        out[13] = a[13];\r\n        out[14] = a[14];\r\n        out[15] = a[15];\r\n    }\r\n\r\n    // Perform axis-specific matrix multiplication\r\n    out[0] = a00 * c + a10 * s;\r\n    out[1] = a01 * c + a11 * s;\r\n    out[2] = a02 * c + a12 * s;\r\n    out[3] = a03 * c + a13 * s;\r\n    out[4] = a10 * c - a00 * s;\r\n    out[5] = a11 * c - a01 * s;\r\n    out[6] = a12 * c - a02 * s;\r\n    out[7] = a13 * c - a03 * s;\r\n    return out;\r\n};\r\n\r\n/**\r\n * Rotates a matrix by the given angle around the Z axis using SIMD\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nmat4.SIMD.rotateZ = function (out, a, rad) {\r\n    var s = SIMD.Float32x4.splat(Math.sin(rad)),\r\n        c = SIMD.Float32x4.splat(Math.cos(rad));\r\n\r\n    if (a !== out) { // If the source and destination differ, copy the unchanged last row\r\n        out[8]  = a[8];\r\n        out[9]  = a[9];\r\n        out[10] = a[10];\r\n        out[11] = a[11];\r\n        out[12] = a[12];\r\n        out[13] = a[13];\r\n        out[14] = a[14];\r\n        out[15] = a[15];\r\n    }\r\n\r\n    // Perform axis-specific matrix multiplication\r\n    var a_0 = SIMD.Float32x4.load(a, 0);\r\n    var a_1 = SIMD.Float32x4.load(a, 4);\r\n    SIMD.Float32x4.store(out, 0,\r\n                         SIMD.Float32x4.add(SIMD.Float32x4.mul(a_0, c), SIMD.Float32x4.mul(a_1, s)));\r\n    SIMD.Float32x4.store(out, 4,\r\n                         SIMD.Float32x4.sub(SIMD.Float32x4.mul(a_1, c), SIMD.Float32x4.mul(a_0, s)));\r\n    return out;\r\n};\r\n\r\n/**\r\n * Rotates a matrix by the given angle around the Z axis if SIMD available and enabled\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\n mat4.rotateZ = glMatrix.USE_SIMD ? mat4.SIMD.rotateZ : mat4.scalar.rotateZ;\r\n\r\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\r\nmat4.fromTranslation = function(out, v) {\r\n    out[0] = 1;\r\n    out[1] = 0;\r\n    out[2] = 0;\r\n    out[3] = 0;\r\n    out[4] = 0;\r\n    out[5] = 1;\r\n    out[6] = 0;\r\n    out[7] = 0;\r\n    out[8] = 0;\r\n    out[9] = 0;\r\n    out[10] = 1;\r\n    out[11] = 0;\r\n    out[12] = v[0];\r\n    out[13] = v[1];\r\n    out[14] = v[2];\r\n    out[15] = 1;\r\n    return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\r\nmat4.fromScaling = function(out, v) {\r\n    out[0] = v[0];\r\n    out[1] = 0;\r\n    out[2] = 0;\r\n    out[3] = 0;\r\n    out[4] = 0;\r\n    out[5] = v[1];\r\n    out[6] = 0;\r\n    out[7] = 0;\r\n    out[8] = 0;\r\n    out[9] = 0;\r\n    out[10] = v[2];\r\n    out[11] = 0;\r\n    out[12] = 0;\r\n    out[13] = 0;\r\n    out[14] = 0;\r\n    out[15] = 1;\r\n    return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\r\nmat4.fromRotation = function(out, rad, axis) {\r\n    var x = axis[0], y = axis[1], z = axis[2],\r\n        len = Math.sqrt(x * x + y * y + z * z),\r\n        s, c, t;\r\n\r\n    if (Math.abs(len) < glMatrix.EPSILON) { return null; }\r\n\r\n    len = 1 / len;\r\n    x *= len;\r\n    y *= len;\r\n    z *= len;\r\n\r\n    s = Math.sin(rad);\r\n    c = Math.cos(rad);\r\n    t = 1 - c;\r\n\r\n    // Perform rotation-specific matrix multiplication\r\n    out[0] = x * x * t + c;\r\n    out[1] = y * x * t + z * s;\r\n    out[2] = z * x * t - y * s;\r\n    out[3] = 0;\r\n    out[4] = x * y * t - z * s;\r\n    out[5] = y * y * t + c;\r\n    out[6] = z * y * t + x * s;\r\n    out[7] = 0;\r\n    out[8] = x * z * t + y * s;\r\n    out[9] = y * z * t - x * s;\r\n    out[10] = z * z * t + c;\r\n    out[11] = 0;\r\n    out[12] = 0;\r\n    out[13] = 0;\r\n    out[14] = 0;\r\n    out[15] = 1;\r\n    return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nmat4.fromXRotation = function(out, rad) {\r\n    var s = Math.sin(rad),\r\n        c = Math.cos(rad);\r\n\r\n    // Perform axis-specific matrix multiplication\r\n    out[0]  = 1;\r\n    out[1]  = 0;\r\n    out[2]  = 0;\r\n    out[3]  = 0;\r\n    out[4] = 0;\r\n    out[5] = c;\r\n    out[6] = s;\r\n    out[7] = 0;\r\n    out[8] = 0;\r\n    out[9] = -s;\r\n    out[10] = c;\r\n    out[11] = 0;\r\n    out[12] = 0;\r\n    out[13] = 0;\r\n    out[14] = 0;\r\n    out[15] = 1;\r\n    return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nmat4.fromYRotation = function(out, rad) {\r\n    var s = Math.sin(rad),\r\n        c = Math.cos(rad);\r\n\r\n    // Perform axis-specific matrix multiplication\r\n    out[0]  = c;\r\n    out[1]  = 0;\r\n    out[2]  = -s;\r\n    out[3]  = 0;\r\n    out[4] = 0;\r\n    out[5] = 1;\r\n    out[6] = 0;\r\n    out[7] = 0;\r\n    out[8] = s;\r\n    out[9] = 0;\r\n    out[10] = c;\r\n    out[11] = 0;\r\n    out[12] = 0;\r\n    out[13] = 0;\r\n    out[14] = 0;\r\n    out[15] = 1;\r\n    return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nmat4.fromZRotation = function(out, rad) {\r\n    var s = Math.sin(rad),\r\n        c = Math.cos(rad);\r\n\r\n    // Perform axis-specific matrix multiplication\r\n    out[0]  = c;\r\n    out[1]  = s;\r\n    out[2]  = 0;\r\n    out[3]  = 0;\r\n    out[4] = -s;\r\n    out[5] = c;\r\n    out[6] = 0;\r\n    out[7] = 0;\r\n    out[8] = 0;\r\n    out[9] = 0;\r\n    out[10] = 1;\r\n    out[11] = 0;\r\n    out[12] = 0;\r\n    out[13] = 0;\r\n    out[14] = 0;\r\n    out[15] = 1;\r\n    return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     var quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\r\nmat4.fromRotationTranslation = function (out, q, v) {\r\n    // Quaternion math\r\n    var x = q[0], y = q[1], z = q[2], w = q[3],\r\n        x2 = x + x,\r\n        y2 = y + y,\r\n        z2 = z + z,\r\n\r\n        xx = x * x2,\r\n        xy = x * y2,\r\n        xz = x * z2,\r\n        yy = y * y2,\r\n        yz = y * z2,\r\n        zz = z * z2,\r\n        wx = w * x2,\r\n        wy = w * y2,\r\n        wz = w * z2;\r\n\r\n    out[0] = 1 - (yy + zz);\r\n    out[1] = xy + wz;\r\n    out[2] = xz - wy;\r\n    out[3] = 0;\r\n    out[4] = xy - wz;\r\n    out[5] = 1 - (xx + zz);\r\n    out[6] = yz + wx;\r\n    out[7] = 0;\r\n    out[8] = xz + wy;\r\n    out[9] = yz - wx;\r\n    out[10] = 1 - (xx + yy);\r\n    out[11] = 0;\r\n    out[12] = v[0];\r\n    out[13] = v[1];\r\n    out[14] = v[2];\r\n    out[15] = 1;\r\n\r\n    return out;\r\n};\r\n\r\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\r\nmat4.getTranslation = function (out, mat) {\r\n  out[0] = mat[12];\r\n  out[1] = mat[13];\r\n  out[2] = mat[14];\r\n\r\n  return out;\r\n};\r\n\r\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be \r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\r\nmat4.getScaling = function (out, mat) {\r\n  var m11 = mat[0],\r\n      m12 = mat[1],\r\n      m13 = mat[2],\r\n      m21 = mat[4],\r\n      m22 = mat[5],\r\n      m23 = mat[6],\r\n      m31 = mat[8],\r\n      m32 = mat[9],\r\n      m33 = mat[10];\r\n\r\n  out[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\r\n  out[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\r\n  out[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\r\n\r\n  return out;\r\n};\r\n\r\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {mat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\r\nmat4.getRotation = function (out, mat) {\r\n  // Algorithm taken from http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\r\n  var trace = mat[0] + mat[5] + mat[10];\r\n  var S = 0;\r\n\r\n  if (trace > 0) { \r\n    S = Math.sqrt(trace + 1.0) * 2;\r\n    out[3] = 0.25 * S;\r\n    out[0] = (mat[6] - mat[9]) / S;\r\n    out[1] = (mat[8] - mat[2]) / S; \r\n    out[2] = (mat[1] - mat[4]) / S; \r\n  } else if ((mat[0] > mat[5])&(mat[0] > mat[10])) { \r\n    S = Math.sqrt(1.0 + mat[0] - mat[5] - mat[10]) * 2;\r\n    out[3] = (mat[6] - mat[9]) / S;\r\n    out[0] = 0.25 * S;\r\n    out[1] = (mat[1] + mat[4]) / S; \r\n    out[2] = (mat[8] + mat[2]) / S; \r\n  } else if (mat[5] > mat[10]) { \r\n    S = Math.sqrt(1.0 + mat[5] - mat[0] - mat[10]) * 2;\r\n    out[3] = (mat[8] - mat[2]) / S;\r\n    out[0] = (mat[1] + mat[4]) / S; \r\n    out[1] = 0.25 * S;\r\n    out[2] = (mat[6] + mat[9]) / S; \r\n  } else { \r\n    S = Math.sqrt(1.0 + mat[10] - mat[0] - mat[5]) * 2;\r\n    out[3] = (mat[1] - mat[4]) / S;\r\n    out[0] = (mat[8] + mat[2]) / S;\r\n    out[1] = (mat[6] + mat[9]) / S;\r\n    out[2] = 0.25 * S;\r\n  }\r\n\r\n  return out;\r\n};\r\n\r\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     var quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\r\nmat4.fromRotationTranslationScale = function (out, q, v, s) {\r\n    // Quaternion math\r\n    var x = q[0], y = q[1], z = q[2], w = q[3],\r\n        x2 = x + x,\r\n        y2 = y + y,\r\n        z2 = z + z,\r\n\r\n        xx = x * x2,\r\n        xy = x * y2,\r\n        xz = x * z2,\r\n        yy = y * y2,\r\n        yz = y * z2,\r\n        zz = z * z2,\r\n        wx = w * x2,\r\n        wy = w * y2,\r\n        wz = w * z2,\r\n        sx = s[0],\r\n        sy = s[1],\r\n        sz = s[2];\r\n\r\n    out[0] = (1 - (yy + zz)) * sx;\r\n    out[1] = (xy + wz) * sx;\r\n    out[2] = (xz - wy) * sx;\r\n    out[3] = 0;\r\n    out[4] = (xy - wz) * sy;\r\n    out[5] = (1 - (xx + zz)) * sy;\r\n    out[6] = (yz + wx) * sy;\r\n    out[7] = 0;\r\n    out[8] = (xz + wy) * sz;\r\n    out[9] = (yz - wx) * sz;\r\n    out[10] = (1 - (xx + yy)) * sz;\r\n    out[11] = 0;\r\n    out[12] = v[0];\r\n    out[13] = v[1];\r\n    out[14] = v[2];\r\n    out[15] = 1;\r\n\r\n    return out;\r\n};\r\n\r\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     var quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @param {vec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\r\nmat4.fromRotationTranslationScaleOrigin = function (out, q, v, s, o) {\r\n  // Quaternion math\r\n  var x = q[0], y = q[1], z = q[2], w = q[3],\r\n      x2 = x + x,\r\n      y2 = y + y,\r\n      z2 = z + z,\r\n\r\n      xx = x * x2,\r\n      xy = x * y2,\r\n      xz = x * z2,\r\n      yy = y * y2,\r\n      yz = y * z2,\r\n      zz = z * z2,\r\n      wx = w * x2,\r\n      wy = w * y2,\r\n      wz = w * z2,\r\n\r\n      sx = s[0],\r\n      sy = s[1],\r\n      sz = s[2],\r\n\r\n      ox = o[0],\r\n      oy = o[1],\r\n      oz = o[2];\r\n\r\n  out[0] = (1 - (yy + zz)) * sx;\r\n  out[1] = (xy + wz) * sx;\r\n  out[2] = (xz - wy) * sx;\r\n  out[3] = 0;\r\n  out[4] = (xy - wz) * sy;\r\n  out[5] = (1 - (xx + zz)) * sy;\r\n  out[6] = (yz + wx) * sy;\r\n  out[7] = 0;\r\n  out[8] = (xz + wy) * sz;\r\n  out[9] = (yz - wx) * sz;\r\n  out[10] = (1 - (xx + yy)) * sz;\r\n  out[11] = 0;\r\n  out[12] = v[0] + ox - (out[0] * ox + out[4] * oy + out[8] * oz);\r\n  out[13] = v[1] + oy - (out[1] * ox + out[5] * oy + out[9] * oz);\r\n  out[14] = v[2] + oz - (out[2] * ox + out[6] * oy + out[10] * oz);\r\n  out[15] = 1;\r\n\r\n  return out;\r\n};\r\n\r\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\r\nmat4.fromQuat = function (out, q) {\r\n    var x = q[0], y = q[1], z = q[2], w = q[3],\r\n        x2 = x + x,\r\n        y2 = y + y,\r\n        z2 = z + z,\r\n\r\n        xx = x * x2,\r\n        yx = y * x2,\r\n        yy = y * y2,\r\n        zx = z * x2,\r\n        zy = z * y2,\r\n        zz = z * z2,\r\n        wx = w * x2,\r\n        wy = w * y2,\r\n        wz = w * z2;\r\n\r\n    out[0] = 1 - yy - zz;\r\n    out[1] = yx + wz;\r\n    out[2] = zx - wy;\r\n    out[3] = 0;\r\n\r\n    out[4] = yx - wz;\r\n    out[5] = 1 - xx - zz;\r\n    out[6] = zy + wx;\r\n    out[7] = 0;\r\n\r\n    out[8] = zx + wy;\r\n    out[9] = zy - wx;\r\n    out[10] = 1 - xx - yy;\r\n    out[11] = 0;\r\n\r\n    out[12] = 0;\r\n    out[13] = 0;\r\n    out[14] = 0;\r\n    out[15] = 1;\r\n\r\n    return out;\r\n};\r\n\r\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\r\nmat4.frustum = function (out, left, right, bottom, top, near, far) {\r\n    var rl = 1 / (right - left),\r\n        tb = 1 / (top - bottom),\r\n        nf = 1 / (near - far);\r\n    out[0] = (near * 2) * rl;\r\n    out[1] = 0;\r\n    out[2] = 0;\r\n    out[3] = 0;\r\n    out[4] = 0;\r\n    out[5] = (near * 2) * tb;\r\n    out[6] = 0;\r\n    out[7] = 0;\r\n    out[8] = (right + left) * rl;\r\n    out[9] = (top + bottom) * tb;\r\n    out[10] = (far + near) * nf;\r\n    out[11] = -1;\r\n    out[12] = 0;\r\n    out[13] = 0;\r\n    out[14] = (far * near * 2) * nf;\r\n    out[15] = 0;\r\n    return out;\r\n};\r\n\r\n/**\r\n * Generates a perspective projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\r\nmat4.perspective = function (out, fovy, aspect, near, far) {\r\n    var f = 1.0 / Math.tan(fovy / 2),\r\n        nf = 1 / (near - far);\r\n    out[0] = f / aspect;\r\n    out[1] = 0;\r\n    out[2] = 0;\r\n    out[3] = 0;\r\n    out[4] = 0;\r\n    out[5] = f;\r\n    out[6] = 0;\r\n    out[7] = 0;\r\n    out[8] = 0;\r\n    out[9] = 0;\r\n    out[10] = (far + near) * nf;\r\n    out[11] = -1;\r\n    out[12] = 0;\r\n    out[13] = 0;\r\n    out[14] = (2 * far * near) * nf;\r\n    out[15] = 0;\r\n    return out;\r\n};\r\n\r\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\r\nmat4.perspectiveFromFieldOfView = function (out, fov, near, far) {\r\n    var upTan = Math.tan(fov.upDegrees * Math.PI/180.0),\r\n        downTan = Math.tan(fov.downDegrees * Math.PI/180.0),\r\n        leftTan = Math.tan(fov.leftDegrees * Math.PI/180.0),\r\n        rightTan = Math.tan(fov.rightDegrees * Math.PI/180.0),\r\n        xScale = 2.0 / (leftTan + rightTan),\r\n        yScale = 2.0 / (upTan + downTan);\r\n\r\n    out[0] = xScale;\r\n    out[1] = 0.0;\r\n    out[2] = 0.0;\r\n    out[3] = 0.0;\r\n    out[4] = 0.0;\r\n    out[5] = yScale;\r\n    out[6] = 0.0;\r\n    out[7] = 0.0;\r\n    out[8] = -((leftTan - rightTan) * xScale * 0.5);\r\n    out[9] = ((upTan - downTan) * yScale * 0.5);\r\n    out[10] = far / (near - far);\r\n    out[11] = -1.0;\r\n    out[12] = 0.0;\r\n    out[13] = 0.0;\r\n    out[14] = (far * near) / (near - far);\r\n    out[15] = 0.0;\r\n    return out;\r\n}\r\n\r\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\r\nmat4.ortho = function (out, left, right, bottom, top, near, far) {\r\n    var lr = 1 / (left - right),\r\n        bt = 1 / (bottom - top),\r\n        nf = 1 / (near - far);\r\n    out[0] = -2 * lr;\r\n    out[1] = 0;\r\n    out[2] = 0;\r\n    out[3] = 0;\r\n    out[4] = 0;\r\n    out[5] = -2 * bt;\r\n    out[6] = 0;\r\n    out[7] = 0;\r\n    out[8] = 0;\r\n    out[9] = 0;\r\n    out[10] = 2 * nf;\r\n    out[11] = 0;\r\n    out[12] = (left + right) * lr;\r\n    out[13] = (top + bottom) * bt;\r\n    out[14] = (far + near) * nf;\r\n    out[15] = 1;\r\n    return out;\r\n};\r\n\r\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\r\nmat4.lookAt = function (out, eye, center, up) {\r\n    var x0, x1, x2, y0, y1, y2, z0, z1, z2, len,\r\n        eyex = eye[0],\r\n        eyey = eye[1],\r\n        eyez = eye[2],\r\n        upx = up[0],\r\n        upy = up[1],\r\n        upz = up[2],\r\n        centerx = center[0],\r\n        centery = center[1],\r\n        centerz = center[2];\r\n\r\n    if (Math.abs(eyex - centerx) < glMatrix.EPSILON &&\r\n        Math.abs(eyey - centery) < glMatrix.EPSILON &&\r\n        Math.abs(eyez - centerz) < glMatrix.EPSILON) {\r\n        return mat4.identity(out);\r\n    }\r\n\r\n    z0 = eyex - centerx;\r\n    z1 = eyey - centery;\r\n    z2 = eyez - centerz;\r\n\r\n    len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\r\n    z0 *= len;\r\n    z1 *= len;\r\n    z2 *= len;\r\n\r\n    x0 = upy * z2 - upz * z1;\r\n    x1 = upz * z0 - upx * z2;\r\n    x2 = upx * z1 - upy * z0;\r\n    len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\r\n    if (!len) {\r\n        x0 = 0;\r\n        x1 = 0;\r\n        x2 = 0;\r\n    } else {\r\n        len = 1 / len;\r\n        x0 *= len;\r\n        x1 *= len;\r\n        x2 *= len;\r\n    }\r\n\r\n    y0 = z1 * x2 - z2 * x1;\r\n    y1 = z2 * x0 - z0 * x2;\r\n    y2 = z0 * x1 - z1 * x0;\r\n\r\n    len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\r\n    if (!len) {\r\n        y0 = 0;\r\n        y1 = 0;\r\n        y2 = 0;\r\n    } else {\r\n        len = 1 / len;\r\n        y0 *= len;\r\n        y1 *= len;\r\n        y2 *= len;\r\n    }\r\n\r\n    out[0] = x0;\r\n    out[1] = y0;\r\n    out[2] = z0;\r\n    out[3] = 0;\r\n    out[4] = x1;\r\n    out[5] = y1;\r\n    out[6] = z1;\r\n    out[7] = 0;\r\n    out[8] = x2;\r\n    out[9] = y2;\r\n    out[10] = z2;\r\n    out[11] = 0;\r\n    out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\r\n    out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\r\n    out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\r\n    out[15] = 1;\r\n\r\n    return out;\r\n};\r\n\r\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {mat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\r\nmat4.str = function (a) {\r\n    return 'mat4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' +\r\n                    a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' +\r\n                    a[8] + ', ' + a[9] + ', ' + a[10] + ', ' + a[11] + ', ' +\r\n                    a[12] + ', ' + a[13] + ', ' + a[14] + ', ' + a[15] + ')';\r\n};\r\n\r\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {mat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\r\nmat4.frob = function (a) {\r\n    return(Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2) + Math.pow(a[9], 2) + Math.pow(a[10], 2) + Math.pow(a[11], 2) + Math.pow(a[12], 2) + Math.pow(a[13], 2) + Math.pow(a[14], 2) + Math.pow(a[15], 2) ))\r\n};\r\n\r\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\r\nmat4.add = function(out, a, b) {\r\n    out[0] = a[0] + b[0];\r\n    out[1] = a[1] + b[1];\r\n    out[2] = a[2] + b[2];\r\n    out[3] = a[3] + b[3];\r\n    out[4] = a[4] + b[4];\r\n    out[5] = a[5] + b[5];\r\n    out[6] = a[6] + b[6];\r\n    out[7] = a[7] + b[7];\r\n    out[8] = a[8] + b[8];\r\n    out[9] = a[9] + b[9];\r\n    out[10] = a[10] + b[10];\r\n    out[11] = a[11] + b[11];\r\n    out[12] = a[12] + b[12];\r\n    out[13] = a[13] + b[13];\r\n    out[14] = a[14] + b[14];\r\n    out[15] = a[15] + b[15];\r\n    return out;\r\n};\r\n\r\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\r\nmat4.subtract = function(out, a, b) {\r\n    out[0] = a[0] - b[0];\r\n    out[1] = a[1] - b[1];\r\n    out[2] = a[2] - b[2];\r\n    out[3] = a[3] - b[3];\r\n    out[4] = a[4] - b[4];\r\n    out[5] = a[5] - b[5];\r\n    out[6] = a[6] - b[6];\r\n    out[7] = a[7] - b[7];\r\n    out[8] = a[8] - b[8];\r\n    out[9] = a[9] - b[9];\r\n    out[10] = a[10] - b[10];\r\n    out[11] = a[11] - b[11];\r\n    out[12] = a[12] - b[12];\r\n    out[13] = a[13] - b[13];\r\n    out[14] = a[14] - b[14];\r\n    out[15] = a[15] - b[15];\r\n    return out;\r\n};\r\n\r\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\r\nmat4.sub = mat4.subtract;\r\n\r\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\r\nmat4.multiplyScalar = function(out, a, b) {\r\n    out[0] = a[0] * b;\r\n    out[1] = a[1] * b;\r\n    out[2] = a[2] * b;\r\n    out[3] = a[3] * b;\r\n    out[4] = a[4] * b;\r\n    out[5] = a[5] * b;\r\n    out[6] = a[6] * b;\r\n    out[7] = a[7] * b;\r\n    out[8] = a[8] * b;\r\n    out[9] = a[9] * b;\r\n    out[10] = a[10] * b;\r\n    out[11] = a[11] * b;\r\n    out[12] = a[12] * b;\r\n    out[13] = a[13] * b;\r\n    out[14] = a[14] * b;\r\n    out[15] = a[15] * b;\r\n    return out;\r\n};\r\n\r\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\r\nmat4.multiplyScalarAndAdd = function(out, a, b, scale) {\r\n    out[0] = a[0] + (b[0] * scale);\r\n    out[1] = a[1] + (b[1] * scale);\r\n    out[2] = a[2] + (b[2] * scale);\r\n    out[3] = a[3] + (b[3] * scale);\r\n    out[4] = a[4] + (b[4] * scale);\r\n    out[5] = a[5] + (b[5] * scale);\r\n    out[6] = a[6] + (b[6] * scale);\r\n    out[7] = a[7] + (b[7] * scale);\r\n    out[8] = a[8] + (b[8] * scale);\r\n    out[9] = a[9] + (b[9] * scale);\r\n    out[10] = a[10] + (b[10] * scale);\r\n    out[11] = a[11] + (b[11] * scale);\r\n    out[12] = a[12] + (b[12] * scale);\r\n    out[13] = a[13] + (b[13] * scale);\r\n    out[14] = a[14] + (b[14] * scale);\r\n    out[15] = a[15] + (b[15] * scale);\r\n    return out;\r\n};\r\n\r\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\nmat4.exactEquals = function (a, b) {\r\n    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && \r\n           a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && \r\n           a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] &&\r\n           a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\r\n};\r\n\r\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\nmat4.equals = function (a, b) {\r\n    var a0  = a[0],  a1  = a[1],  a2  = a[2],  a3  = a[3],\r\n        a4  = a[4],  a5  = a[5],  a6  = a[6],  a7  = a[7], \r\n        a8  = a[8],  a9  = a[9],  a10 = a[10], a11 = a[11], \r\n        a12 = a[12], a13 = a[13], a14 = a[14], a15 = a[15];\r\n\r\n    var b0  = b[0],  b1  = b[1],  b2  = b[2],  b3  = b[3],\r\n        b4  = b[4],  b5  = b[5],  b6  = b[6],  b7  = b[7], \r\n        b8  = b[8],  b9  = b[9],  b10 = b[10], b11 = b[11], \r\n        b12 = b[12], b13 = b[13], b14 = b[14], b15 = b[15];\r\n\r\n    return (Math.abs(a0 - b0) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\r\n            Math.abs(a1 - b1) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\r\n            Math.abs(a2 - b2) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a2), Math.abs(b2)) &&\r\n            Math.abs(a3 - b3) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a3), Math.abs(b3)) &&\r\n            Math.abs(a4 - b4) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a4), Math.abs(b4)) &&\r\n            Math.abs(a5 - b5) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a5), Math.abs(b5)) &&\r\n            Math.abs(a6 - b6) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a6), Math.abs(b6)) &&\r\n            Math.abs(a7 - b7) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a7), Math.abs(b7)) &&\r\n            Math.abs(a8 - b8) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a8), Math.abs(b8)) &&\r\n            Math.abs(a9 - b9) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a9), Math.abs(b9)) &&\r\n            Math.abs(a10 - b10) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a10), Math.abs(b10)) &&\r\n            Math.abs(a11 - b11) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a11), Math.abs(b11)) &&\r\n            Math.abs(a12 - b12) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a12), Math.abs(b12)) &&\r\n            Math.abs(a13 - b13) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a13), Math.abs(b13)) &&\r\n            Math.abs(a14 - b14) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a14), Math.abs(b14)) &&\r\n            Math.abs(a15 - b15) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a15), Math.abs(b15)));\r\n};\r\n\r\n\r\n\r\nmodule.exports = mat4;\n\n\n// WEBPACK FOOTER //\n// ./src/lib/glMatrix-mat4.js","/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE. */\r\n\r\n/**\r\n * @class Common utilities\r\n * @name glMatrix\r\n */\r\nvar glMatrix = {};\r\n\r\n// Configuration Constants\r\nglMatrix.EPSILON = 0.000001;\r\nglMatrix.ARRAY_TYPE = (typeof Float32Array !== 'undefined') ? Float32Array : Array;\r\nglMatrix.RANDOM = Math.random;\r\nglMatrix.ENABLE_SIMD = false;\r\n\r\nvar self = this || window || global;\r\n\r\n// Capability detection\r\nglMatrix.SIMD_AVAILABLE = (glMatrix.ARRAY_TYPE === self.Float32Array) && ('SIMD' in self);\r\nglMatrix.USE_SIMD = glMatrix.ENABLE_SIMD && glMatrix.SIMD_AVAILABLE;\r\n\r\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Type} type Array type, such as Float32Array or Array\r\n */\r\nglMatrix.setMatrixArrayType = function(type) {\r\n    glMatrix.ARRAY_TYPE = type;\r\n}\r\n\r\nvar degree = Math.PI / 180;\r\n\r\n/**\r\n* Convert Degree To Radian\r\n*\r\n* @param {Number} a Angle in Degrees\r\n*/\r\nglMatrix.toRadian = function(a){\r\n     return a * degree;\r\n}\r\n\r\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less \r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n * \r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\r\nglMatrix.equals = function(a, b) {\r\n\treturn Math.abs(a - b) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a), Math.abs(b));\r\n}\r\n\r\nmodule.exports = glMatrix;\n\n\n// WEBPACK FOOTER //\n// ./src/lib/glMatrix-common.js","export default function ModelSettingJson(json)\r\n{\r\n    this.NAME = \"name\";\r\n    this.ID = \"id\";\r\n    this.MODEL = \"model\";\r\n    this.TEXTURES = \"textures\";\r\n    this.HIT_AREAS = \"hit_areas\";\r\n    this.PHYSICS = \"physics\";\r\n    this.POSE = \"pose\";\r\n    this.EXPRESSIONS = \"expressions\";\r\n    this.MOTION_GROUPS = \"motions\";\r\n    this.SOUND = \"sound\";\r\n    this.FADE_IN = \"fade_in\";\r\n    this.FADE_OUT = \"fade_out\";\r\n    this.LAYOUT = \"layout\";\r\n    this.INIT_PARAM = \"init_param\";\r\n    this.INIT_PARTS_VISIBLE = \"init_parts_visible\";\r\n    this.VALUE = \"val\";\r\n    this.FILE = \"file\";\r\n\r\n    this.json = json || {};\r\n}\r\n\r\n\r\n// ModelSettingJson.prototype.loadModelSetting = function(path, callback)\r\n// {\r\n//     var thisRef = this;\r\n//     var pm = Live2DFramework.getPlatformManager();\r\n//     pm.loadBytes(path, function(buf) {\r\n//         var str = String.fromCharCode.apply(null,new Uint8Array(buf));\r\n//         thisRef.json = JSON.parse(str);\r\n//         callback();\r\n//     });\r\n// };\r\n\r\n\r\nModelSettingJson.prototype.getTextureFile = function(n)\r\n{\r\n    if (this.json[this.TEXTURES] == null || this.json[this.TEXTURES][n] == null)\r\n        return null;\r\n\r\n    return this.json[this.TEXTURES][n];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getModelFile = function()\r\n{\r\n    return this.json[this.MODEL];\r\n};\r\n\r\n\r\nModelSettingJson.prototype.getTextureNum = function()\r\n{\r\n    if (this.json[this.TEXTURES] == null) return 0;\r\n\r\n    return this.json[this.TEXTURES].length;\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getHitAreaNum = function()\r\n{\r\n    if (this.json[this.HIT_AREAS] == null)\r\n        return 0;\r\n\r\n    return this.json[this.HIT_AREAS].length;\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getHitAreaID = function(n)\r\n{\r\n    if (this.json[this.HIT_AREAS] == null ||\r\n        this.json[this.HIT_AREAS][n] == null)\r\n        return null;\r\n\r\n    return this.json[this.HIT_AREAS][n][this.ID];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getHitAreaName = function(n)\r\n{\r\n    if (this.json[this.HIT_AREAS] == null ||\r\n        this.json[this.HIT_AREAS][n] == null)\r\n        return null;\r\n\r\n    return this.json[this.HIT_AREAS][n][this.NAME];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getPhysicsFile = function()\r\n{\r\n    return this.json[this.PHYSICS];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getPoseFile = function()\r\n{\r\n    return this.json[this.POSE];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getExpressionNum = function()\r\n{\r\n    return (this.json[this.EXPRESSIONS] == null) ? 0 : this.json[this.EXPRESSIONS].length;\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getExpressionFile = function(n)\r\n{\r\n    if (this.json[this.EXPRESSIONS] == null)\r\n        return null;\r\n    return this.json[this.EXPRESSIONS][n][this.FILE];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getExpressionName = function(n)\r\n{\r\n    if (this.json[this.EXPRESSIONS] == null)\r\n        return null;\r\n    return this.json[this.EXPRESSIONS][n][this.NAME];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getLayout = function()\r\n{\r\n    return this.json[this.LAYOUT];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getInitParamNum = function()\r\n{\r\n    return (this.json[this.INIT_PARAM] == null) ? 0 : this.json[this.INIT_PARAM].length;\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getMotionNum = function(name)\r\n{\r\n    if (this.json[this.MOTION_GROUPS] == null ||\r\n        this.json[this.MOTION_GROUPS][name] == null)\r\n        return 0;\r\n\r\n    return this.json[this.MOTION_GROUPS][name].length;\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getMotionFile = function(name, n)\r\n{\r\n    if (this.json[this.MOTION_GROUPS] == null ||\r\n        this.json[this.MOTION_GROUPS][name] == null ||\r\n        this.json[this.MOTION_GROUPS][name][n] == null)\r\n        return null;\r\n\r\n    return this.json[this.MOTION_GROUPS][name][n][this.FILE];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getMotionSound = function(name, n)\r\n{\r\n    if (this.json[this.MOTION_GROUPS] == null ||\r\n        this.json[this.MOTION_GROUPS][name] == null ||\r\n        this.json[this.MOTION_GROUPS][name][n] == null ||\r\n        this.json[this.MOTION_GROUPS][name][n][this.SOUND] == null)\r\n        return null;\r\n\r\n    return this.json[this.MOTION_GROUPS][name][n][this.SOUND];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getMotionFadeIn = function(name, n)\r\n{\r\n    if (this.json[this.MOTION_GROUPS] == null ||\r\n        this.json[this.MOTION_GROUPS][name] == null ||\r\n        this.json[this.MOTION_GROUPS][name][n] == null ||\r\n        this.json[this.MOTION_GROUPS][name][n][this.FADE_IN] == null)\r\n        return 1000;\r\n\r\n    return this.json[this.MOTION_GROUPS][name][n][this.FADE_IN];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getMotionFadeOut = function(name, n)\r\n{\r\n    if (this.json[this.MOTION_GROUPS] == null ||\r\n        this.json[this.MOTION_GROUPS][name] == null ||\r\n        this.json[this.MOTION_GROUPS][name][n] == null ||\r\n        this.json[this.MOTION_GROUPS][name][n][this.FADE_OUT] == null)\r\n        return 1000;\r\n\r\n    return this.json[this.MOTION_GROUPS][name][n][this.FADE_OUT];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getInitParamID = function(n)\r\n{\r\n    if (this.json[this.INIT_PARAM] == null ||\r\n        this.json[this.INIT_PARAM][n] == null)\r\n        return null;\r\n\r\n    return this.json[this.INIT_PARAM][n][this.ID];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getInitParamValue = function(n)\r\n{\r\n    if (this.json[this.INIT_PARAM] == null || this.json[this.INIT_PARAM][n] == null)\r\n        return NaN;\r\n\r\n    return this.json[this.INIT_PARAM][n][this.VALUE];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getInitPartsVisibleNum = function()\r\n{\r\n    return (this.json[this.INIT_PARTS_VISIBLE] == null) ? 0 : this.json[this.INIT_PARTS_VISIBLE].length;\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getInitPartsVisibleID = function(n)\r\n{\r\n    if (this.json[this.INIT_PARTS_VISIBLE] == null || this.json[this.INIT_PARTS_VISIBLE][n] == null)\r\n        return null;\r\n    return this.json[this.INIT_PARTS_VISIBLE][n][this.ID];\r\n}\r\n\r\n\r\nModelSettingJson.prototype.getInitPartsVisibleValue = function(n)\r\n{\r\n    if (this.json[this.INIT_PARTS_VISIBLE] == null || this.json[this.INIT_PARTS_VISIBLE][n] == null)\r\n        return NaN;\r\n\r\n    return this.json[this.INIT_PARTS_VISIBLE][n][this.VALUE];\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/ModelSettingJson.js","module.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"pixi.js\"\n// module id = 9\n// module chunks = 0"],"sourceRoot":""}